This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
api/auth.ts
api/host.ts
api/payment.ts
api/user.ts
app.json
app/_layout.tsx
app/(auth)/basic-details.tsx
app/(auth)/intro.tsx
app/(auth)/login.tsx
app/(auth)/otp.tsx
app/(auth)/signup.tsx
app/(auth)/splash.tsx
app/(tabs-host)/_layout.tsx
app/(tabs-host)/add-charger/index.tsx
app/(tabs-host)/earnings/index.tsx
app/(tabs-host)/home-login/index.tsx
app/(tabs-host)/manage-charger/index.tsx
app/(tabs-host)/pricing-settings/index.tsx
app/(tabs-host)/upload-pictures/index.tsx
app/(tabs-user)/_layout.tsx
app/(tabs-user)/bookings/cancelled.tsx
app/(tabs-user)/bookings/index.tsx
app/(tabs-user)/bookings/past.tsx
app/(tabs-user)/bookings/upcoming.tsx
app/(tabs-user)/home/index.tsx
app/(tabs-user)/map.tsx
app/(tabs-user)/profile/change-password.tsx
app/(tabs-user)/profile/edit-profile.tsx
app/(tabs-user)/profile/index.tsx
app/(tabs-user)/profile/kyc.tsx
app/(tabs-user)/profile/notifications.tsx
app/(tabs-user)/profile/refer-and-earn.tsx
app/(tabs-user)/profile/settings.tsx
app/(tabs-user)/profile/support.tsx
app/(tabs-user)/profile/usage-management.tsx
app/(tabs-user)/search/booking.tsx
app/(tabs-user)/search/charger.tsx
app/(tabs-user)/search/filter.tsx
app/(tabs-user)/search/index.tsx
app/(tabs-user)/search/invoice.tsx
app/(tabs-user)/search/payment-done.tsx
app/(tabs-user)/search/payment-summary.tsx
app/(tabs-user)/search/rating.tsx
app/(tabs-user)/search/results.tsx
app/(tabs-user)/wallet/add-money.tsx
app/(tabs-user)/wallet/index.tsx
app/(tabs-user)/wallet/payment-method.tsx
app/(tabs-user)/wallet/payment-screen/card.tsx
app/(tabs-user)/wallet/payment-screen/chargelinkwallet.tsx
app/(tabs-user)/wallet/payment-screen/upi.tsx
app/(tabs-user)/wallet/transactions.tsx
app/modal.tsx
app/test-role.tsx
components/external-link.tsx
components/haptic-tab.tsx
components/hello-wave.tsx
components/MapFallback.tsx
components/MapFallback.web.tsx
components/parallax-scroll-view.tsx
components/themed-text.tsx
components/themed-view.tsx
components/ui/collapsible.tsx
components/ui/icon-symbol.ios.tsx
components/ui/icon-symbol.tsx
constants/theme.ts
eslint.config.js
hooks/use-color-scheme.ts
hooks/use-color-scheme.web.ts
hooks/use-theme-color.ts
native/MapComponent.tsx
native/MapComponent.web.tsx
package.json
README.md
scripts/reset-project.js
tsconfig.json
utils/auth-check.ts
utils/constants.ts
utils/storage.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Learn more https://docs.github.com/en/get-started/getting-started-with-git/ignoring-files

# dependencies
node_modules/

# Expo
.expo/
dist/
web-build/
expo-env.d.ts

# Native
.kotlin/
*.orig.*
*.jks
*.p8
*.p12
*.key
*.mobileprovision

# Metro
.metro-health-check*

# debug
npm-debug.*
yarn-debug.*
yarn-error.*

# macOS
.DS_Store
*.pem

# local env files
.env*.local

.env
.expo/

# typescript
*.tsbuildinfo

app-example

# generated native folders
/ios
/android

repomix-output.xml
</file>

<file path="api/auth.ts">
// api/auth.ts

// Dummy types
export type LoginResponse = {
    success: boolean;
    token?: string;
    message: string;
  };
  
  export type UserDetails = {
    id: string;
    name: string;
    email: string;
    role: "user" | "host";
  };
  
  // Dummy Login API
  export async function login(email: string, password: string): Promise<LoginResponse> {
    return {
      success: true,
      token: "dummy_jwt_token_123",
      message: "Login successful (dummy API)",
    };
  }
  
  // Dummy OTP Verify
  export async function verifyOTP(otp: string): Promise<boolean> {
    return otp === "1234"; // temporary logic
  }
  
  // Dummy Fetch User
  export async function getUser(): Promise<UserDetails> {
    return {
      id: "u123",
      name: "Demo User",
      email: "demo@user.com",
      role: "user",
    };
  }
</file>

<file path="api/host.ts">
// api/host.ts

export type ChargerData = {
    id: string;
    name: string;
    location: string;
    price: number;
    slots: number;
  };
  
  export type EarningsData = {
    totalEarnings: number;
    lastMonth: number;
    totalBookings: number;
  };
  
  export async function fetchChargers(): Promise<ChargerData[]> {
    return [
      { id: "1", name: "EV Station Sector 21", location: "Gurgaon", price: 18, slots: 4 },
      { id: "2", name: "FastCharge Station", location: "Delhi", price: 20, slots: 2 },
    ];
  }
  
  export async function addCharger(data: ChargerData) {
    return { success: true, added: data };
  }
  
  export async function fetchEarnings(): Promise<EarningsData> {
    return {
      totalEarnings: 5400,
      lastMonth: 1200,
      totalBookings: 23,
    };
  }
</file>

<file path="api/payment.ts">
// api/payments.ts

export type Transaction = {
    id: string;
    type: "add" | "payment" | "refund";
    amount: number;
    date: string;
  };
  
  export async function addMoney(amount: number) {
    return {
      success: true,
      message: `‚Çπ${amount} added (dummy)`,
    };
  }
  
  export async function fetchTransactions(): Promise<Transaction[]> {
    return [
      { id: "tr1", type: "add", amount: 500, date: "23 Jan 2025" },
      { id: "tr2", type: "payment", amount: -120, date: "22 Jan 2025" },
      { id: "tr3", type: "refund", amount: 120, date: "20 Jan 2025" },
    ];
  }
  
  export async function paymentEV(amount: number) {
    return {
      success: true,
      transactionId: "PAY98765",
      message: `Paid ‚Çπ${amount} (dummy)`,
    };
  }
</file>

<file path="api/user.ts">
// api/user.ts

export type UserProfile = {
    id: string;
    name: string;
    email: string;
    phone: string;
    role: "user";
  };
  
  export async function fetchUserProfile(): Promise<UserProfile> {
    return {
      id: "u123",
      name: "Demo User",
      email: "demo@user.com",
      phone: "+91 9876543210",
      role: "user",
    };
  }
  
  export async function updateUserProfile(data: Partial<UserProfile>) {
    return { success: true, updated: data }; // frontend test only
  }
</file>

<file path="app.json">
{
  "expo": {
    "name": "app",
    "slug": "app",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/images/icon.png",
    "scheme": "app",
    "userInterfaceStyle": "automatic",
    "newArchEnabled": true,
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "backgroundColor": "#E6F4FE",
        "foregroundImage": "./assets/images/android-icon-foreground.png",
        "backgroundImage": "./assets/images/android-icon-background.png",
        "monochromeImage": "./assets/images/android-icon-monochrome.png"
      },
      "edgeToEdgeEnabled": true,
      "predictiveBackGestureEnabled": false
    },
    "web": {
      "output": "static",
      "favicon": "./assets/images/favicon.png"
    },
    "plugins": [
      "expo-router",
      [
        "expo-splash-screen",
        {
          "image": "./assets/images/splash-icon.png",
          "imageWidth": 200,
          "resizeMode": "contain",
          "backgroundColor": "#ffffff",
          "dark": {
            "backgroundColor": "#000000"
          }
        }
      ]
    ],
    "experiments": {
      "typedRoutes": true,
      "reactCompiler": true
    }
  }
}
</file>

<file path="app/_layout.tsx">
import { DarkTheme, DefaultTheme, ThemeProvider } from "@react-navigation/native";
import { Stack, useRouter } from "expo-router";
import { StatusBar } from "expo-status-bar";
import "react-native-reanimated";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { useColorScheme } from "@/hooks/use-color-scheme";
import { useEffect, useState } from "react";
import { ActivityIndicator, View, Text } from "react-native";

export const unstable_settings = {
  initialRouteName: "(auth)/splash",
};

export default function RootLayout() {
  const colorScheme = useColorScheme();
  const router = useRouter();
  const [role, setRole] = useState<string | null>(null);
  const [roleChecked, setRoleChecked] = useState(false);

  useEffect(() => {
    const checkRole = async () => {
      try {
        await AsyncStorage.setItem("role","driver");
        const storedRole = await AsyncStorage.getItem("role");
        console.log("ROLE FROM STORAGE:", storedRole);
        setRole(storedRole);
      } catch (error) {
        console.log("AsyncStorage Error:", error);
      } finally {
        setRoleChecked(true); // Only set after finishing!
      }
    };

    checkRole();
  }, []);

  // üìå ROLE DECISION ONLY AFTER LOADING DONE
  useEffect(() => {
    if (roleChecked) {
      if (role === null) router.replace("/(auth)/splash");
      if (role === "driver") router.replace("/(tabs-user)/home");
      if (role === "host") router.replace("/(tabs-host)/home-login");
    }
  }, [roleChecked, role]);

  // üõ° SAFE LOADING SCREEN
  if (!roleChecked) {
    return (
      <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>
        <ActivityIndicator size="large" />
        <Text style={{ marginTop: 10 }}>Loading app...</Text>
      </View>
    );
  }

  return (
    <ThemeProvider value={colorScheme === "dark" ? DarkTheme : DefaultTheme}>
      <Stack screenOptions={{ headerShown: false }}>
        <Stack.Screen name="(auth)/splash" />
        <Stack.Screen name="(auth)/intro" />
        <Stack.Screen name="(auth)/login" />
        <Stack.Screen name="(auth)/signup" />
        <Stack.Screen name="(auth)/otp" />
        <Stack.Screen name="(auth)/basic-details" />
        <Stack.Screen name="(tabs-user)" />
        <Stack.Screen name="(tabs-host)" />
      </Stack>

      <StatusBar style="auto" />
    </ThemeProvider>
  );
}
</file>

<file path="app/(auth)/basic-details.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { useRouter } from "expo-router";

export default function BasicDetails() {
  const router = useRouter();
  const [fullname, setFullname] = useState("");
  const [age, setAge] = useState("");
  const [role, setRole] = useState("driver"); // default

  const handleSubmit = async () => {
    if (!fullname || !age) {
      Alert.alert("Error", "Please fill all details");
      return;
    }
    await AsyncStorage.setItem("role", role);  // SAVE ROLE HERE
    router.replace(`/(tabs-${role})`);  // ROLE WISE REDIRECT ‚úî
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Almost Done üôå</Text>
      <Text style={styles.subtitle}>Complete your profile</Text>

      <TextInput
        style={styles.input}
        placeholder="Full Name"
        placeholderTextColor="#b0bec5"
        onChangeText={setFullname}
      />

      <TextInput
        style={styles.input}
        placeholder="Age"
        placeholderTextColor="#b0bec5"
        keyboardType="numeric"
        onChangeText={setAge}
      />

      {/* ROLE CONFIRM  (Can Change Again) */}
      <TouchableOpacity
        style={[styles.roleBtn, role === "driver" && styles.active]}
        onPress={() => setRole("driver")}
      >
        <Text style={[styles.roleText, role === "driver" && { color: "white" }]}>Driver</Text>
      </TouchableOpacity>

      <TouchableOpacity
        style={[styles.roleBtn, role === "host" && styles.active]}
        onPress={() => setRole("host")}
      >
        <Text style={[styles.roleText, role === "host" && { color: "white" }]}>Host</Text>
      </TouchableOpacity>

      {/* SUBMIT */}
      <TouchableOpacity style={styles.button} onPress={handleSubmit}>
        <Text style={styles.buttonText}>Continue ‚ûú</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "white", justifyContent: "center", padding: 25 },
  title: { fontSize: 28, fontWeight: "bold", textAlign: "center", color: "black" },
  subtitle: { textAlign: "center", marginBottom: 20, color: "#6F6F6F" },

  input: {
    backgroundColor: "white",
    padding: 14,
    borderRadius: 10,
    borderWidth: 1.5,
    borderColor: "#4A4A4A",
    marginBottom: 15,
    color: "black",
  },

  roleBtn: {
    padding: 14, borderWidth: 1.5, borderColor: "#4A4A4A",
    borderRadius: 10, marginBottom: 12, alignItems: "center",
  },
  active: { backgroundColor: "black", borderColor: "#4A9032" },
  roleText: { color: "black", fontWeight: "bold" },

  button: {
    backgroundColor: "white",
    padding: 14,
    borderRadius: 10,
    alignItems: "center",
    borderWidth: 2,
    borderColor: "#4A4A4A",
  },
  buttonText: { color: "black", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="app/(auth)/intro.tsx">
import React, { useRef, useState } from "react";
import { View, Text, Image, StyleSheet, Dimensions, TouchableOpacity, FlatList } from "react-native";
import { useRouter } from "expo-router";

const { width } = Dimensions.get("window");
const slides = [
    {
        id: "1",
        title: "Find Nearest EV Chargers",
        description: "Locate and book charging stations in seconds.",
        image: require("@/assets/images/logo.png"),
    },
    {
        id: "2",
        title: "Easy & Secure Payment",
        description: "Pay smoothly using multiple payment options.",
        image: require("@/assets/images/ev-image.jpg"),
    },
    {
        id: "3",
        title: "Grow as a Host",
        description: "Add your charger & start earning with EV users.",
        image: require("@/assets/images/logo.png"),
    },
];

export default function Intro() {
    const [currentIndex, setCurrentIndex] = useState(0);
    const flatListRef = useRef<FlatList>(null);
    const router = useRouter();

    const handleNext = () => {
        if (currentIndex < slides.length - 1) {
            flatListRef.current?.scrollToIndex({ index: currentIndex + 1 });
        } else {
            router.replace("/(auth)/login"); // After last slide ‚Üí login page
        }
    };

    const handleSkip = () => {
        router.replace("/(auth)/login");
    };

    const onScroll = (e: any) => {
        const index = Math.round(e.nativeEvent.contentOffset.x / width);
        setCurrentIndex(index);
    };

    return (
        <View style={styles.container}>
            <FlatList
                data={slides}
                ref={flatListRef}
                horizontal
                pagingEnabled
                showsHorizontalScrollIndicator={false}
                onScroll={onScroll}
                renderItem={({ item }) => (
                    <View style={styles.slide}>
                        <Image source={item.image} style={styles.image} resizeMode="contain" />
                        <Text style={styles.title}>{item.title}</Text>
                        <Text style={styles.description}>{item.description}</Text>
                    </View>
                )}
            />

            {/* DOT INDICATORS */}
            <View style={styles.dotsContainer}>
                {slides.map((_, i) => (
                    <View key={i} style={[styles.dot, currentIndex === i && styles.activeDot]} />
                ))}
            </View>

            {/* BUTTONS */}
            <View style={styles.buttonContainer}>
                {currentIndex < slides.length - 1 ? (
                    <>
                        <TouchableOpacity onPress={handleSkip}>
                            <Text style={styles.skip}>Skip</Text>
                        </TouchableOpacity>

                        <TouchableOpacity style={styles.nextBtn} onPress={handleNext}>
                            <Text style={styles.nextText}>Next ‚Üí</Text>
                        </TouchableOpacity>
                    </>
                ) : (
                    <TouchableOpacity style={styles.startBtn} onPress={handleNext}>
                        <Text style={styles.startText}>Get Started ‚ö°</Text>
                    </TouchableOpacity>
                )}
            </View>
        </View>
    );
}

const styles = StyleSheet.create({
    container: { flex: 1, backgroundColor: "white" },
    slide: { width, alignItems: "center", padding: 20 },
    image: { width: "80%", height: 250, marginTop: 40 },
    title: { fontSize: 24, fontWeight: "bold", marginTop: 30, textAlign: "center" },
    description: { fontSize: 16, color: "#666", marginTop: 10, textAlign: "center" },
    dotsContainer: { flexDirection: "row", justifyContent: "center", marginTop: 20 },
    dot: {
        width: 8, height: 8, borderRadius: 4, backgroundColor: "#ccc", marginHorizontal: 5,
    },
    activeDot: { backgroundColor: "black", width: 10, height: 10 },
    buttonContainer: {
        position: "absolute", bottom: 40, width: "100%", flexDirection: "row",
        justifyContent: "space-between", paddingHorizontal: 30,
    },
    skip: { fontSize: 16, color: "#999" },
    nextBtn: { backgroundColor: "black", paddingVertical: 10, paddingHorizontal: 20, borderRadius: 10 },
    nextText: { color: "white", fontSize: 16 },
    startBtn: { backgroundColor: "black", paddingVertical: 14, borderRadius: 12, width: "70%", alignSelf: "center" },
    startText: { color: "white", textAlign: "center", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="app/(auth)/login.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from "react-native";
import { useRouter } from "expo-router";

export default function Login() {
  const router = useRouter();
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  const handleLogin = () => {
    if (!email || !password) {
      Alert.alert("Error", "Please fill all fields!");
      return;
    }
    router.replace("/(auth)/otp"); // redirect to OTP before tabs
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>ChargeLink</Text>
      <Text style={styles.subtitle}>Welcome Back ‚ö°</Text>

      {/* Email Input */}
      <TextInput
        style={styles.input}
        placeholder="Email"
        placeholderTextColor="#b0bec5"
        onChangeText={setEmail}
      />

      {/* Password Input */}
      <TextInput
        style={styles.input}
        placeholder="Password"
        placeholderTextColor="#b0bec5"
        secureTextEntry
        onChangeText={setPassword}
      />

      {/* Forgot Password */}
      <TouchableOpacity>
        <Text style={styles.forgot}>Forgot Password?</Text>
      </TouchableOpacity>

      {/* Login Button */}
      <TouchableOpacity style={styles.button} onPress={handleLogin}>
        <Text style={styles.buttonText}>Login</Text>
      </TouchableOpacity>

      {/* Signup Link */}
      <TouchableOpacity onPress={() => router.push("/(auth)/signup")}>
        <Text style={styles.link}>Don't have an account? Sign up ‚Üí</Text>
      </TouchableOpacity>
    </View>
  );
}

// üé® STYLE SAME THEME AS SIGNUP
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "white",
    justifyContent: "center",
    padding: 25,
  },
  title: {
    fontSize: 40,
    fontWeight: "bold",
    color: "black",
    textAlign: "center",
  },
  subtitle: {
    fontSize: 16,
    color: "#6F6F6F",
    textAlign: "center",
    marginBottom: 30,
  },
  input: {
    backgroundColor: "white",
    padding: 14,
    borderRadius: 10,
    marginBottom: 15,
    borderWidth: 1.5,
    borderColor: "#4A4A4A",
    color: "black",
  },
  forgot: {
    textAlign: "right",
    marginBottom: 10,
    color: "#4A4A4A",
  },
  button: {
    backgroundColor: "white",
    padding: 14,
    borderRadius: 10,
    alignItems: "center",
    borderWidth: 2,
    borderColor: "#4A4A4A",
  },
  buttonText: { color: "black", fontSize: 16, fontWeight: "bold" },
  link: { textAlign: "center", marginTop: 20, color: "#b0bec5" },
});
</file>

<file path="app/(auth)/otp.tsx">
import React, { useRef, useState, useEffect } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet } from "react-native";
import { useRouter } from "expo-router";

export default function OTP() {
  const router = useRouter();
  const [timer, setTimer] = useState<number>(30); // üî• Now Type Fixed
  const inputs = useRef<Array<TextInput | null>>([]);

  // Auto focus & next input
  const handleChange = (text: string, index: number) => {
    if (text) {
      if (index < 3) {
        inputs.current[index + 1]?.focus();
      } else {
        router.replace("/(auth)/basic-details");
      }
    }
  };

  // Timer countdown
  useEffect(() => {
    if (timer === 0) return;
    const interval = setInterval(() => setTimer((t) => t - 1), 1000);
    return () => clearInterval(interval);
  }, [timer]);

  // Optional: Clear all inputs when screen opens
  useEffect(() => {
    inputs.current.forEach((input) => input?.clear());
    inputs.current[0]?.focus();
  }, []);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Verify OTP üîê</Text>
      <Text style={styles.subtitle}>Enter the 4-digit OTP sent to your phone</Text>

      {/* OTP INPUTS */}
      <View style={styles.otpRow}>
        {[0, 1, 2, 3].map((i) => (
          <TextInput
            key={i}
            style={styles.otpInput}
            keyboardType="number-pad"   // üëà More accurate for mobile
            maxLength={1}
            ref={(ref) => (inputs.current[i] = ref)}
            onChangeText={(text) => handleChange(text, i)}
          />
        ))}
      </View>

      {/* RESEND TIMER */}
      <TouchableOpacity disabled={timer !== 0} onPress={() => setTimer(30)}>
        <Text style={[styles.resend, { color: timer === 0 ? "black" : "#b0bec5" }]}>
          {timer === 0 ? "Resend OTP üîÅ" : `Resend in ${timer}s`}
        </Text>
      </TouchableOpacity>

      <TouchableOpacity
        onPress={() => router.replace("/test-role")}
        style={{ marginTop: 20 }}
      >
        <Text style={{ color: "blue", fontSize: 16 }}>üöÄ Skip for testing</Text>
      </TouchableOpacity>

    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "white", justifyContent: "center", alignItems: "center" },
  title: { fontSize: 28, fontWeight: "bold", color: "black" },
  subtitle: { fontSize: 14, color: "#6F6F6F", marginBottom: 25, textAlign: "center", paddingHorizontal: 20 },

  otpRow: { flexDirection: "row", gap: 12 },
  otpInput: {
    width: 55,
    height: 55,
    backgroundColor: "white",
    borderWidth: 2,
    borderColor: "#4A4A4A",
    borderRadius: 10,
    textAlign: "center",
    fontSize: 22,
    color: "black",
  },

  resend: { marginTop: 30, fontSize: 16 },
});
</file>

<file path="app/(auth)/signup.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from "react-native";
import { Picker } from "@react-native-picker/picker";
import { useRouter } from "expo-router";
import Ionicons from '@expo/vector-icons/Ionicons';

export default function SignUp() {
  const router = useRouter();
  const [name, setName] = useState("");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [role, setRole] = useState("driver");
  const [countryCode, setCountryCode] = useState("+91");
  const [phone, setPhone] = useState("");

  const handleSignup = () => {
    if (!name || !email || !password || !phone) {
      Alert.alert("Error", "Please fill all fields!");
      return;
    }

    router.replace("/(auth)/otp");  // üîÅ OTP page after signup ‚úî
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>ChargeLink</Text>

      {/* NAME */}
      <TextInput
        style={styles.input}
        placeholder="Name"
        placeholderTextColor="#b0bec5"
        onChangeText={setName}
      />

      {/* EMAIL */}
      <TextInput
        style={styles.input}
        placeholder="Email"
        placeholderTextColor="#b0bec5"
        keyboardType="email-address"
        onChangeText={setEmail}
      />

      {/* PASSWORD */}
      <TextInput
        style={styles.input}
        placeholder="Password"
        placeholderTextColor="#b0bec5"
        secureTextEntry
        onChangeText={setPassword}
      />

      {/* PHONE + COUNTRY CODE */}
      <View style={styles.phoneContainer}>
        <Picker selectedValue={countryCode} onValueChange={setCountryCode} style={styles.picker}>
          <Picker.Item label="+91 üáÆüá≥" value="+91" />
          <Picker.Item label="+1 üá∫üá∏" value="+1" />
          <Picker.Item label="+44 üá¨üáß" value="+44" />
        </Picker>

        <TextInput
          style={styles.phoneInput}
          placeholder="Phone Number"
          placeholderTextColor="#b0bec5"
          keyboardType="phone-pad"
          onChangeText={setPhone}
        />
      </View>

      {/* ROLE SELECTION */}
      <View style={styles.roleContainer}>
        <Text style={styles.roleLabel}>Signup As:</Text>
        <View style={styles.roleButtons}>
          
          {/* DRIVER */}
          <TouchableOpacity
            style={[styles.roleBtn, role === "driver" && styles.roleActive]}
            onPress={() => setRole("driver")}
          >
            <View style={styles.roleRow}>
              <Ionicons name="car-sport-outline" size={20} color={role === "driver" ? "white" : "black"} />
              <Text style={[styles.roleText, role === "driver" && { color: "white" }]}>Driver</Text>
            </View>
          </TouchableOpacity>

          {/* HOST */}
          <TouchableOpacity
            style={[styles.roleBtn, role === "host" && styles.roleActive]}
            onPress={() => setRole("host")}
          >
            <View style={styles.roleRow}>
              <Ionicons name="flash-outline" size={20} color={role === "host" ? "white" : "black"} />
              <Text style={[styles.roleText, role === "host" && { color: "white" }]}>Host</Text>
            </View>
          </TouchableOpacity>

        </View>
      </View>

      {/* SIGNUP BUTTON */}
      <TouchableOpacity style={styles.button} onPress={handleSignup}>
        <Text style={styles.buttonText}>Create Account</Text>
      </TouchableOpacity>

      {/* LOGIN LINK */}
      <TouchableOpacity onPress={() => router.push("/(auth)/login")}>
        <Text style={styles.link}>Already have an account? Login ‚Üí</Text>
      </TouchableOpacity>
    </View>
  );
}


/* üé® SAME THEME ‚Äî NO STYLE BROKEN */
const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "white", justifyContent: "center", padding: 25 },
  title: { fontSize: 40, fontWeight: "bold", color: "black", textAlign: "center", marginBottom: 30 },

  input: {
    backgroundColor: "white",
    padding: 14,
    borderRadius: 10,
    marginBottom: 15,
    borderWidth: 1,
    borderColor: "#4A4A4A",
    color: "black",
  },
  phoneContainer: { flexDirection: "row", alignItems: "center", marginBottom: 15 },
  picker: { flex: 0.30, backgroundColor: "white" },
  phoneInput: {
    flex: 0.65,
    padding: 12,
    borderRadius: 10,
    marginLeft: 8,
    borderWidth: 1.3,
    borderColor: "#4A4A4A",
    backgroundColor: "white",
    color: "black",
  },

  roleContainer: { marginVertical: 20 },
  roleLabel: { color: "black", marginBottom: 10, fontSize: 14, fontWeight: "bold" },
  roleButtons: { flexDirection: "row", justifyContent: "space-between" },

  roleBtn: {
    flex: 1,
    padding: 12,
    borderRadius: 10,
    borderWidth: 1,
    borderColor: "#4A4A4A",
    backgroundColor: "white",
    marginHorizontal: 5,
  },
  roleActive: { backgroundColor: "black", borderColor: "#4A9032" },
  roleRow: { flexDirection: "row", alignItems: "center", justifyContent: "center", gap: 6 },
  roleText: { color: "black", fontWeight: "bold" },

  button: { backgroundColor: "white", padding: 14, borderRadius: 10, alignItems: "center", borderWidth: 2, borderColor: "#4A4A4A" },
  buttonText: { color: "black", fontSize: 16, fontWeight: "bold" },

  link: { textAlign: "center", marginTop: 20, color: "#b0bec5" },
});
</file>

<file path="app/(auth)/splash.tsx">
import React, { useEffect, useRef } from "react";
import { View, StyleSheet, Animated } from "react-native";
import { useRouter } from "expo-router";
import { FontAwesome6 } from "@expo/vector-icons";

export default function SplashScreen() {
  const router = useRouter();

  // Logo animation values
  const logoOpacity = useRef(new Animated.Value(0)).current;
  const logoScale = useRef(new Animated.Value(0.5)).current;

  // Plug icon animation
  const plugOpacity = useRef(new Animated.Value(0)).current;
  const plugTranslateY = useRef(new Animated.Value(30)).current;

  useEffect(() => {
    // Step 1: Animate the main logo
    Animated.parallel([
      Animated.timing(logoOpacity, {
        toValue: 1,
        duration: 1000,
        useNativeDriver: true,
      }),
      Animated.spring(logoScale, {
        toValue: 1,
        friction: 3,
        useNativeDriver: true,
      }),
    ]).start(() => {
      // Step 2: Plug animation
      Animated.parallel([
        Animated.timing(plugOpacity, {
          toValue: 1,
          duration: 600,
          useNativeDriver: true,
        }),
        Animated.spring(plugTranslateY, {
          toValue: 0,
          friction: 2,
          useNativeDriver: true,
        }),
      ]).start();
    });

    // Step 3: Navigate to intro.tsx after 3 seconds
    const timeout = setTimeout(() => {
      router.replace("/(auth)/intro");  // üëà NEW REDIRECT
    }, 4000);

    return () => clearTimeout(timeout);
  }, []);

  return (
    <View style={styles.container}>
      {/* Logo */}
      <Animated.Image
        source={require("@/assets/images/logo.png")} // üîÅ same logo
        style={[
          styles.logo,
          {
            opacity: logoOpacity,
            transform: [{ scale: logoScale }],
          },
        ]}
        resizeMode="contain"
      />

      {/* Plug Icon */}
      <Animated.View
        style={{
          opacity: plugOpacity,
          transform: [{ translateY: plugTranslateY }],
          position: "absolute",
          top: "65%",
        }}
      >
        <FontAwesome6 name="plug-circle-bolt" size={60} color="black" />
      </Animated.View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "white",
    justifyContent: "center",
    alignItems: "center",
  },
  logo: { width: 200, height: 200 },
});
</file>

<file path="app/(tabs-host)/_layout.tsx">
// app/(tabs-host)/_layout.tsx

import { Tabs } from "expo-router";
import React from "react";

import { HapticTab } from "@/components/haptic-tab";
import { IconSymbol } from "@/components/ui/icon-symbol";
import { Colors } from "@/constants/theme";
import { useColorScheme } from "@/hooks/use-color-scheme";

export default function HostTabLayout() {
  const colorScheme = useColorScheme();

  return (
    <Tabs
      screenOptions={{
        tabBarStyle: { display: "none" },
        headerShown: false,
        tabBarButton: HapticTab,
      }}
    >
      {/* üè† HOME LOGIN */}
      <Tabs.Screen
        name="home-login"
        options={{
          title: "Home",
          tabBarIcon: ({ color }) => (
            <IconSymbol size={28} name="house.fill" color={color} />
          ),
        }}
      />

      {/* üí∞ EARNINGS */}
      <Tabs.Screen
        name="earnings"
        options={{
          title: "Earnings",
          tabBarIcon: ({ color }) => (
            <IconSymbol size={28} name="rupeesign" color={color} />
          ),
        }}
      />

      {/* ‚öô MANAGE CHARGER */}
      <Tabs.Screen
        name="manage-charger"
        options={{
          title: "Manage",
          tabBarIcon: ({ color }) => (
            <IconSymbol size={28} name="gear" color={color} />
          ),
        }}
      />

      {/* üë§ PROFILE */}
      <Tabs.Screen
        name="profile/index"
        options={{
          title: "Profile",
          tabBarIcon: ({ color }) => (
            <IconSymbol size={28} name="person.fill" color={color} />
          ),
        }}
      />
    </Tabs>
  );
}
</file>

<file path="app/(tabs-host)/add-charger/index.tsx">
import React, { useState, useCallback } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, ScrollView, Image } from "react-native";
import { useRouter, useFocusEffect } from "expo-router";
import * as ImagePicker from "expo-image-picker";

export default function AddCharger() {
  const router = useRouter();
  const [chargerName, setChargerName] = useState("");
  const [location, setLocation] = useState("");
  const [price, setPrice] = useState("");
  const [image, setImage] = useState<string | null>(null);

  // üëá SCREEN OPEN HOTE HI AUTO RESET
  useFocusEffect(
    useCallback(() => {
      setImage(null);     // RESET IMAGE
      setChargerName(""); // OPTIONALLY RESET
      setLocation("");
      setPrice("");

      return () => {}; // cleanup
    }, [])
  );

  const pickImage = async () => {
    const result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.Images,
      allowsEditing: true,
      aspect: [4, 4],
      quality: 1,
    });

    if (!result.canceled) {
      setImage(result.assets[0].uri);
    }
  };

  const handleSubmit = () => {
    router.push({
      pathname: "/(tabs-host)/manage-charger",
      params: { id: Date.now().toString() + Math.random().toString(), 
        location, 
        name: chargerName, 
        price, 
        image 
      },
    });
  };

  return (
    <ScrollView contentContainerStyle={styles.container}>
      <Text style={styles.title}>Add New Charger ‚ö°</Text>

      <TextInput style={styles.input} placeholder="Charger Name" onChangeText={setChargerName} value={chargerName} />
      <TextInput style={styles.input} placeholder="Location" onChangeText={setLocation} value={location} />
      <TextInput style={styles.input} placeholder="Price per kWh (‚Çπ)" keyboardType="numeric" onChangeText={setPrice} value={price} />

      <TouchableOpacity style={styles.uploadBtn} onPress={pickImage}>
        <Text style={styles.uploadText}>Upload Photo üì∏</Text>
      </TouchableOpacity>

      {image && <Image source={{ uri: image }} style={styles.previewImage} />}

      <TouchableOpacity style={styles.button} onPress={handleSubmit}>
        <Text style={styles.buttonText}>Save Charger</Text>
      </TouchableOpacity>
    </ScrollView>
  );
}

const styles = StyleSheet.create({
  container: { padding: 20 },
  title: { fontSize: 24, fontWeight: "bold", marginBottom: 20, textAlign: "center" },
  input: { borderWidth: 1, borderColor: "#ccc", borderRadius: 10, padding: 12, marginBottom: 15 },
  uploadBtn: { backgroundColor: "blue", paddingVertical: 12, borderRadius: 10, alignItems: "center", marginBottom: 10 },
  uploadText: { color: "white", fontWeight: "bold" },
  previewImage: { width: "100%", height: 150, marginTop: 10, borderRadius: 10 },
  button: { backgroundColor: "black", paddingVertical: 14, borderRadius: 10, alignItems: "center" },
  buttonText: { color: "white", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="app/(tabs-host)/earnings/index.tsx">
import { View, Text, StyleSheet, Dimensions, TouchableOpacity, ActivityIndicator } from "react-native";
import { BarChart } from "react-native-chart-kit";
import { useRouter } from "expo-router";
import React, { useEffect, useState } from "react";
import Ionicons from "@expo/vector-icons/Ionicons";

type WeeklyData = {
  day: string;
  amount: number;
};

export default function Earnings() {
  const router = useRouter();
  const [loading, setLoading] = useState(true);
  const [weeklyData, setWeeklyData] = useState<WeeklyData[]>([]);
  const [total, setTotal] = useState(0);

  useEffect(() => {
    // üîπ Simulate API call with 1.5s delay
    const fetchMockData = async () => {
      setLoading(true);
      setTimeout(() => {
        const mockWeekly: WeeklyData[] = [
          { day: "Mon", amount: 120 },
          { day: "Tue", amount: 150 },
          { day: "Wed", amount: 180 },
          { day: "Thu", amount: 90 },
          { day: "Fri", amount: 200 },
          { day: "Sat", amount: 170 },
        ];
        setWeeklyData(mockWeekly);
        setTotal(mockWeekly.reduce((sum, d) => sum + d.amount, 0));
        setLoading(false);
      }, 1500);
    };

    fetchMockData();
  }, []);

  if (loading) {
    return (
      <View style={[styles.container, { justifyContent: "center", alignItems: "center" }]}>
        <ActivityIndicator size="large" color="black" />
      </View>
    );
  }

  const data = {
    labels: weeklyData.map(d => d.day),
    datasets: [{ data: weeklyData.map(d => d.amount) }],
  };

  const chartConfig = {
    backgroundGradientFrom: "#ffffff",
    backgroundGradientTo: "#ffffff",
    decimalPlaces: 0,
    color: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,
    labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,
    barPercentage: 0.6,
  };

  return (
    <View style={styles.container}>
      <TouchableOpacity onPress={() => router.push("/(tabs-host)/home-login")}>
        <Ionicons name="arrow-back-circle-outline" size={36} />
      </TouchableOpacity>

      <Text style={styles.title}>Weekly Earnings üíµ</Text>
      <Text style={styles.subtitle}>Total: ‚Çπ{total}</Text>

      <BarChart
        data={data}
        width={Dimensions.get("window").width - 30}
        height={250}
        yAxisLabel="‚Çπ"
        chartConfig={chartConfig}
        style={{ borderRadius: 12 }}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20 },
  title: { fontSize: 24, fontWeight: "bold", marginBottom: 10 },
  subtitle: { fontSize: 16, marginBottom: 20, color: "green" },
});
</file>

<file path="app/(tabs-host)/home-login/index.tsx">
import React, { useEffect, useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TouchableOpacity,
  ScrollView,
} from "react-native";
import { useRouter } from "expo-router";
import AsyncStorage from "@react-native-async-storage/async-storage";

export default function HomeLogin() {
  const router = useRouter();
  const [stats, setStats] = useState({ earnings: 0, chargers: 0 });

  // üî• Fetch from AsyncStorage
  const fetchStatsFromStorage = async () => {
    try {
      const earnings = await AsyncStorage.getItem("totalEarnings");
      const chargers = await AsyncStorage.getItem("activeChargers");

      setStats({
        earnings: earnings ? Number(earnings) : 0,
        chargers: chargers ? Number(chargers) : 0,
      });
    } catch (error) {
      console.log("Error fetching stats:", error);
    }
  };

  // Screen load hone par SAVE + FETCH
  useEffect(() => {
    const setInitialValues = async () => {
      try {
        const earnings = await AsyncStorage.getItem("totalEarnings");

        // Only save if not already stored
        if (!earnings) {
          await AsyncStorage.setItem("totalEarnings", "5000");
          await AsyncStorage.setItem("activeChargers", "8");
        }
      } catch (error) {
        console.log("Error setting initial values:", error);
      }
    };

    setInitialValues();
    fetchStatsFromStorage();
  }, []);

  return (
    <ScrollView style={styles.container}>
      <View style={styles.header}>
        <Text style={styles.title}>Welcome, Host üëã</Text>
        <Text style={styles.subtitle}>Manage chargers & track earnings</Text>
      </View>

      <View style={styles.statsContainer}>
        <View style={styles.statCard}>
          <Text style={styles.statNumber}>‚Çπ{stats.earnings}</Text>
          <Text style={styles.statLabel}>Total Earnings</Text>
        </View>
        <View style={styles.statCard}>
          <Text style={styles.statNumber}>{stats.chargers}</Text>
          <Text style={styles.statLabel}>Active Chargers</Text>
        </View>
      </View>

      <View style={styles.actions}>
        <TouchableOpacity
          style={styles.cardButton}
          onPress={() => router.push("/(tabs-host)/add-charger")}
        >
          <Text style={styles.cardTitle}>+ Add New Charger</Text>
          <Text style={styles.cardDesc}>Register your EV charger</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.cardButton}
          onPress={() => router.push("/(tabs-host)/manage-charger")}
        >
          <Text style={styles.cardTitle}>Manage Chargers</Text>
          <Text style={styles.cardDesc}>
            Edit, enable/disable, update price
          </Text>
        </TouchableOpacity>
      </View>
    </ScrollView>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "#F5F5F5" },

  header: {
    padding: 20,
    paddingTop: 40,
  },
  title: { fontSize: 28, fontWeight: "bold", color: "black" },
  subtitle: { fontSize: 16, color: "#6F6F6F", marginTop: 4 },

  statsContainer: {
    flexDirection: "row",
    justifyContent: "space-between",
    paddingHorizontal: 20,
    marginTop: 20,
  },
  statCard: {
    backgroundColor: "white",
    flex: 1,
    marginHorizontal: 5,
    padding: 20,
    borderRadius: 14,
    elevation: 3,
    shadowOpacity: 0.1,
    shadowRadius: 4,
  },
  statNumber: { fontSize: 22, fontWeight: "bold", color: "black" },
  statLabel: { fontSize: 14, color: "#6F6F6F", marginTop: 4 },

  actions: {
    marginTop: 30,
    paddingHorizontal: 20,
  },
  cardButton: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 14,
    marginVertical: 10,
    elevation: 4,
    shadowOpacity: 0.15,
    shadowRadius: 6,
  },
  cardTitle: { fontSize: 18, fontWeight: "bold", color: "black" },
  cardDesc: { fontSize: 14, color: "#6F6F6F", marginTop: 4 },
});
</file>

<file path="app/(tabs-host)/manage-charger/index.tsx">
import React, { useEffect, useState } from "react";
import { View, Text, StyleSheet, FlatList, TouchableOpacity, Image } from "react-native";
import { useRouter, useLocalSearchParams } from "expo-router";
import AsyncStorage from "@react-native-async-storage/async-storage";

const defaultImage =
  "https://cdn-icons-png.flaticon.com/512/2967/2967061.png"; // Default image

type Charger = {
  id: string;
  name: string;
  location: string;
  price: string;
  image: string | null;
};

export default function ManageCharger() {
  const router = useRouter();
  const params = useLocalSearchParams();
  const [chargers, setChargers] = useState<Charger[]>([]);
  const [lastAddedId, setLastAddedId] = useState<string | null>(null); // BLOCK LOOP üîí

  // Load existing chargers once
  useEffect(() => {
    const loadData = async () => {
      const saved = await AsyncStorage.getItem("chargers");
      if (saved) setChargers(JSON.parse(saved));
    };
    loadData();
  }, []);

  // Add / Edit charger when params change
  useEffect(() => {
    if (!params?.id) return; // No data ‚Üí return

    const newId = params.id as string;
    if (lastAddedId === newId) return; // SAME PARAM = STOP LOOP üö´

    const newCharger: Charger = {
      id: params.id as string,
      name: params.name as string,
      location: params.location as string,
      price: `${params.price} ‚Çπ/kWh`,
      image: (params.image as string) || null,
    };

    setChargers((prev) => {
      const exists = prev.some((c) => c.id === newCharger.id);
      const updated = exists
        ? prev.map((c) => (c.id === newCharger.id ? newCharger : c)) // EDIT
        : [...prev, newCharger]; // ADD NEW

      AsyncStorage.setItem("chargers", JSON.stringify(updated));
      return updated;
    });

    setLastAddedId(newId);
  }, [params]);

  // DELETE Charger
  const deleteCharger = async (id: string) => {
    const filtered = chargers.filter((c) => c.id !== id);
    setChargers(filtered);
    await AsyncStorage.setItem("chargers", JSON.stringify(filtered));
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Manage Chargers ‚öôÔ∏è</Text>

      {chargers.length === 0 ? (
        <Text style={styles.noData}>‚ö† No chargers available</Text>
      ) : (
        <FlatList
          data={chargers}
          keyExtractor={(item) => item.id}
          renderItem={({ item }) => (
            <TouchableOpacity style={styles.card}>
              <Image
                source={{ uri: item.image ? item.image : defaultImage }}
                style={styles.img}
              />

              <Text style={styles.name}>{item.name}</Text>
              <Text style={styles.sub}>üìç {item.location}</Text>
              <Text style={styles.price}>‚ö° {item.price}</Text>

              <View style={styles.row}>
                <TouchableOpacity
                  style={styles.editBtn}
                  onPress={() =>
                    router.push({
                      pathname: "/(tabs-host)/pricing-settings",
                      params: {
                        id: item.id,
                        name: item.name,
                        location: item.location,
                        currentPrice: item.price.replace(" ‚Çπ/kWh", ""),
                        image: item.image || "",
                      },
                    })
                  }
                >
                  <Text style={styles.editText}>Edit Price</Text>
                </TouchableOpacity>

                <TouchableOpacity
                  style={styles.deleteBtn}
                  onPress={() => deleteCharger(item.id)}
                >
                  <Text style={styles.deleteText}>Delete</Text>
                </TouchableOpacity>
              </View>
            </TouchableOpacity>
          )}
        />
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20 },
  title: { fontSize: 24, fontWeight: "bold", marginBottom: 20 },
  noData: { textAlign: "center", marginTop: 60, fontSize: 18 },
  card: {
    backgroundColor: "#fff",
    padding: 16,
    borderRadius: 12,
    marginBottom: 12,
    borderWidth: 1,
    borderColor: "#ddd",
  },
  img: { width: 100, height: 100, borderRadius: 8, marginBottom: 10 },
  name: { fontSize: 18, fontWeight: "bold" },
  sub: { fontSize: 14, marginBottom: 4 },
  price: { color: "green", fontSize: 16, fontWeight: "bold" },
  row: { flexDirection: "row", justifyContent: "space-between" },
  editBtn: { backgroundColor: "black", padding: 8, borderRadius: 6 },
  deleteBtn: { backgroundColor: "red", padding: 8, borderRadius: 6 },
  editText: { color: "white" },
  deleteText: { color: "white" },
});
</file>

<file path="app/(tabs-host)/pricing-settings/index.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, KeyboardAvoidingView, Platform } from "react-native";
import { useRouter, useLocalSearchParams } from "expo-router";

export default function PricingSettings() {
  const router = useRouter();
  const params = useLocalSearchParams();

  const id = Array.isArray(params.id) ? params.id[0] : params.id;
  const name = Array.isArray(params.name) ? params.name[0] : params.name;
  const location = Array.isArray(params.location) ? params.location[0] : params.location;
  const currentPrice = Array.isArray(params.currentPrice) ? params.currentPrice[0] : params.currentPrice;
  const image = Array.isArray(params.image) ? params.image[0] : params.image;

  const [price, setPrice] = useState(currentPrice || "");

  const updatePrice = () => {
    alert(`Price updated to ‚Çπ${price}/kWh`);

    router.push({
      pathname: "/(tabs-host)/manage-charger",
      params: { id, name, price, location, image },
    });
  };

  return (
    <KeyboardAvoidingView
      behavior={Platform.OS === "ios" ? "padding" : "height"}
      style={styles.container}
    >
      <View style={styles.card}>
        <Text style={styles.title}>Update Price ‚ö°</Text>
        <Text style={styles.subtitle}>Set a new price for your charger</Text>

        <TextInput
          style={styles.input}
          value={price}
          onChangeText={setPrice}
          keyboardType="numeric"
          placeholder="Enter new price"
          placeholderTextColor="#999"
        />

        <TouchableOpacity style={styles.button} onPress={updatePrice}>
          <Text style={styles.buttonText}>Save Price</Text>
        </TouchableOpacity>
      </View>
    </KeyboardAvoidingView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#f2f2f7", // light theme background
    justifyContent: "center",
    padding: 20,
  },
  card: {
    backgroundColor: "#fff",
    borderRadius: 16,
    padding: 25,
    shadowColor: "#000",
    shadowOpacity: 0.1,
    shadowRadius: 10,
    shadowOffset: { width: 0, height: 5 },
    elevation: 5,
  },
  title: {
    fontSize: 24,
    fontWeight: "700",
    marginBottom: 8,
    textAlign: "center",
    color: "#111",
  },
  subtitle: {
    fontSize: 14,
    color: "#666",
    textAlign: "center",
    marginBottom: 20,
  },
  input: {
    borderWidth: 1,
    borderColor: "#ddd",
    borderRadius: 12,
    padding: 14,
    marginBottom: 25,
    fontSize: 16,
    color: "#111",
    backgroundColor: "#f9f9f9",
  },
  button: {
    backgroundColor: "#000",
    paddingVertical: 16,
    borderRadius: 12,
    alignItems: "center",
    shadowColor: "#000",
    shadowOpacity: 0.2,
    shadowRadius: 5,
    shadowOffset: { width: 0, height: 3 },
    elevation: 3,
  },
  buttonText: {
    color: "#fff",
    fontSize: 16,
    fontWeight: "600",
  },
});
</file>

<file path="app/(tabs-host)/upload-pictures/index.tsx">
import React, { useState } from "react";
import { View, Text, Image, TouchableOpacity, StyleSheet } from "react-native";
import * as ImagePicker from "expo-image-picker";

export default function UploadPictures() {
  const [image, setImage] = useState<string | null>(null);

  const pickImage = async () => {
    const res = await ImagePicker.launchImageLibraryAsync({
      allowsEditing: true,
      quality: 0.8,
    });
    if (!res.canceled) setImage(res.assets[0].uri);
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Upload Charger Pictures üì∏</Text>

      {image && <Image source={{ uri: image }} style={styles.preview} />}

      <TouchableOpacity style={styles.button} onPress={pickImage}>
        <Text style={styles.buttonText}>Pick Image</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, alignItems: "center", justifyContent: "center" },
  title: { fontSize: 22, fontWeight: "bold", marginBottom: 20 },
  preview: { width: 250, height: 250, borderRadius: 12, marginBottom: 20 },
  button: {
    backgroundColor: "black", paddingVertical: 14,
    paddingHorizontal: 30, borderRadius: 10,
  },
  buttonText: { color: "white", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="app/(tabs-user)/_layout.tsx">
import { Tabs } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function UserLayout() {
  return (
    <Tabs
      screenOptions={{
        tabBarStyle: {display: "none"},
        headerShown: false,
        tabBarActiveTintColor: "black",
        tabBarInactiveTintColor: "gray",
      }}
    >
      <Tabs.Screen
        name="home"
        options={{
          tabBarLabel: "Home",
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="home" size={size} color={color} />
          ),
        }}
      />

      <Tabs.Screen
        name="search"
        options={{
          tabBarLabel: "Search",
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="search" size={size} color={color} />
          ),
        }}
      />

      <Tabs.Screen
        name="wallet"
        options={{
          tabBarLabel: "Wallet",
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="wallet" size={size} color={color} />
          ),
        }}
      />

      <Tabs.Screen
        name="bookings"
        options={{
          tabBarLabel: "Bookings",
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="calendar" size={size} color={color} />
          ),
        }}
      />

      <Tabs.Screen
        name="profile"
        options={{
          tabBarLabel: "Profile",
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="person" size={size} color={color} />
          ),
        }}
      />
    </Tabs>
  );
}
</file>

<file path="app/(tabs-user)/bookings/cancelled.tsx">
import { View, Text, StyleSheet } from "react-native";

export default function CancelledBookings() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Cancelled Bookings ‚ùå</Text>
      <Text style={styles.subtitle}>Nothing cancelled yet</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center" },
  title: { fontSize: 26, fontWeight: "bold" },
  subtitle: { marginTop: 10, color: "#666" },
});
</file>

<file path="app/(tabs-user)/bookings/index.tsx">
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useRouter } from "expo-router";

export default function BookingsScreen() {
  const router = useRouter();

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Bookings üìÖ</Text>

      {/* BUTTONS */}
      <TouchableOpacity style={styles.btn} onPress={() => router.push("/(tabs-user)/bookings/upcoming")}>
        <Text style={styles.btnText}>Upcoming</Text>
      </TouchableOpacity>

      <TouchableOpacity style={styles.btn} onPress={() => router.push("/(tabs-user)/bookings/past")}>
        <Text style={styles.btnText}>Past</Text>
      </TouchableOpacity>

      <TouchableOpacity style={styles.btn} onPress={() => router.push("/(tabs-user)/bookings/cancelled")}>
        <Text style={styles.btnText}>Cancelled</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center", padding: 20 },
  title: { fontSize: 28, fontWeight: "bold", marginBottom: 20 },
  btn: {
    backgroundColor: "black",
    paddingVertical: 12,
    paddingHorizontal: 30,
    marginVertical: 8,
    borderRadius: 10,
  },
  btnText: { color: "white", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="app/(tabs-user)/bookings/past.tsx">
import { View, Text, StyleSheet } from "react-native";

export default function PastBookings() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Past Bookings üìú</Text>
      <Text style={styles.subtitle}>No past bookings found</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center" },
  title: { fontSize: 26, fontWeight: "bold" },
  subtitle: { marginTop: 10, color: "#666" },
});
</file>

<file path="app/(tabs-user)/bookings/upcoming.tsx">
import { View, Text, StyleSheet } from "react-native";

export default function UpcomingBookings() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Upcoming Bookings üöó</Text>
      <Text style={styles.subtitle}>No bookings yet</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center" },
  title: { fontSize: 26, fontWeight: "bold" },
  subtitle: { marginTop: 10, color: "#666" },
});
</file>

<file path="app/(tabs-user)/home/index.tsx">
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { router } from "expo-router";

export default function HomeScreen() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Home üè†</Text>
      <Text style={styles.subtitle}>User home screen ‚Äî show nearby chargers</Text>

      <View style={styles.buttonContainer}>
        <TouchableOpacity
          style={styles.button}
          onPress={() => router.push("/(tabs-user)/search")}
        >
          <Text style={styles.buttonText}>üîç Search Chargers</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.button}
          onPress={() => router.push("/(tabs-user)/wallet")}
        >
          <Text style={styles.buttonText}>üíº Wallet</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.button}
          onPress={() => router.push("/(tabs-user)/bookings")}
        >
          <Text style={styles.buttonText}>üìñ Bookings</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.button}
          onPress={() => router.push("/(tabs-user)/profile")}
        >
          <Text style={styles.buttonText}>üë§ Profile</Text>
        </TouchableOpacity>
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center", padding: 20 },
  title: { fontSize: 26, fontWeight: "bold" },
  subtitle: { marginTop: 10, color: "#666", marginBottom: 30 },

  buttonContainer: {
    width: "100%",
    marginTop: 20,
  },

  button: {
    backgroundColor: "#007bff",
    padding: 15,
    borderRadius: 12,
    marginVertical: 8,
    width: "100%",
    alignItems: "center",
  },
  buttonText: { color: "#fff", fontSize: 18, fontWeight: "600" },
});
</file>

<file path="app/(tabs-user)/map.tsx">
import React, { useEffect, useState } from "react";
import { View, Text, StyleSheet, ActivityIndicator, Platform } from "react-native";
import * as Location from "expo-location";
import MapComponent from "@/native/MapComponent"; // üëà important
import { router } from "expo-router";

type UserLocation ={
  latitude: number;
  longitude: number;
};

export default function MapScreen() {
  const [location, setLocation] = useState<UserLocation | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    (async () => {
      // Permission
      let { status } = await Location.requestForegroundPermissionsAsync();
      if (status !== "granted") {
        alert("Location permission required!");
        setLoading(false);
        return;
      }

      // Get current location
      const loc = await Location.getCurrentPositionAsync({});
      setLocation({
        latitude: loc.coords.latitude,
        longitude: loc.coords.longitude,
      });
      setLoading(false);
    })();
  }, []);

  if (loading) {
    return (
      <View style={styles.center}>
        <ActivityIndicator size="large" />
        <Text>Getting your location...</Text>
      </View>
    );
  }

  if (!location) {
    return (
      <View style={styles.center}>
        <Text>Unable to fetch location.</Text>
      </View>
    );
  }

  return (
    <View style={{ flex: 1 }}>
      {/* REAL MAP */}
      <MapComponent
        latitude={location.latitude}
        longitude={location.longitude}
        zoom={15}
      />

      {/* Back Button */}
      <Text
        style={styles.back}
        onPress={() => router.navigate("/(tabs-user)/home")}
      >
        ‚Üê Back
      </Text>
    </View>
  );
}

const styles = StyleSheet.create({
  center: { flex: 1, justifyContent: "center", alignItems: "center" },
  back: {
    position: "absolute",
    top: 50,
    left: 20,
    padding: 10,
    backgroundColor: "white",
    borderRadius: 8,
    elevation: 5,
    fontWeight: "bold",
  },
});
</file>

<file path="app/(tabs-user)/profile/change-password.tsx">
import React, { useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TextInput,
  TouchableOpacity,
  Alert,
} from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function ChangePassword() {
  const [oldPass, setOldPass] = useState("");
  const [newPass, setNewPass] = useState("");
  const [confirmPass, setConfirmPass] = useState("");

  const handleChange = async () => {
    if (!oldPass || !newPass || !confirmPass) {
      Alert.alert("Error", "All fields are required!");
      return;
    }

    if (newPass.length < 6) {
      Alert.alert("Error", "New password must be at least 6 characters!");
      return;
    }

    if (newPass !== confirmPass) {
      Alert.alert("Error", "New passwords do not match!");
      return;
    }

    // Get stored user
    const storedUser = await AsyncStorage.getItem("userData");
    if (!storedUser) {
      Alert.alert("Error", "No user data found!");
      return;
    }

    const user = JSON.parse(storedUser);

    // If old password doesn't match
    if (user.password && user.password !== oldPass) {
      Alert.alert("Error", "Old password is incorrect!");
      return;
    }

    // Update password
    const updatedUser = { ...user, password: newPass };
    await AsyncStorage.setItem("userData", JSON.stringify(updatedUser));

    Alert.alert("Success", "Password updated successfully!");
    router.navigate("/(tabs-user)/profile");
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Change Password üîê</Text>

      <View style={styles.card}>
        <View style={styles.inputBox}>
          <Ionicons name="lock-closed-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Old Password"
            secureTextEntry
            value={oldPass}
            onChangeText={setOldPass}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="key-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="New Password"
            secureTextEntry
            value={newPass}
            onChangeText={setNewPass}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="checkmark-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Confirm New Password"
            secureTextEntry
            value={confirmPass}
            onChangeText={setConfirmPass}
          />
        </View>
      </View>

      <TouchableOpacity style={styles.saveBtn} onPress={handleChange}>
        <Text style={styles.saveText}>Update Password</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/profile")} style={{ marginTop: 20 }}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20, textAlign: "center" },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    padding: 20,
    elevation: 4,
  },

  inputBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#F3F4F6",
    padding: 12,
    borderRadius: 12,
    marginBottom: 15,
  },

  input: {
    flex: 1,
    marginLeft: 10,
    fontSize: 16,
  },

  saveBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
    marginTop: 25,
  },

  saveText: { color: "white", fontSize: 16, fontWeight: "bold" },

  back: { fontSize: 16, color: "blue", fontWeight: "500" },
});
</file>

<file path="app/(tabs-user)/profile/edit-profile.tsx">
import React, { useEffect, useState } from "react";
import { View, Text, StyleSheet, TextInput, TouchableOpacity, Alert } from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function EditProfileScreen() {
  const [user, setUser] = useState<any>(null);
  const [name, setName] = useState("");
  const [email, setEmail] = useState("");
  const [phone, setPhone] = useState("");

  useEffect(() => {
    const loadUser = async () => {
      const storedUser = await AsyncStorage.getItem("userData");

      if (storedUser) {
        const u = JSON.parse(storedUser);
        setUser(u);
        setName(u.name);
        setEmail(u.email);
        setPhone(u.phone);
      } else {
        // dummy fallback
        setName("Guest User");
        setEmail("guest@example.com");
        setPhone("0000000000");
      }
    };

    loadUser();
  }, []);

  const handleSave = async () => {
    if (!name || !email || !phone) {
      Alert.alert("Error", "All fields are required!");
      return;
    }

    const updatedUser = { name, email, phone };

    await AsyncStorage.setItem("userData", JSON.stringify(updatedUser));

    Alert.alert("Success", "Profile updated successfully!");
    router.push("/(tabs-user)/profile");
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Edit Profile</Text>

      <View style={styles.card}>
        <View style={styles.inputBox}>
          <Ionicons name="person-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Full Name"
            value={name}
            onChangeText={setName}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="mail-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Email Address"
            value={email}
            onChangeText={setEmail}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="call-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Phone Number"
            keyboardType="number-pad"
            value={phone}
            onChangeText={setPhone}
          />
        </View>
      </View>

      <TouchableOpacity style={styles.saveBtn} onPress={handleSave}>
        <Text style={styles.saveText}>Save Changes</Text>
      </TouchableOpacity>

      <TouchableOpacity style={styles.back} onPress={() => router.push("/(tabs-user)/profile")}>
        <Text style={styles.backText}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20, textAlign: "center" },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    padding: 20,
    elevation: 4,
    marginBottom: 25,
  },

  inputBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#F3F4F6",
    padding: 12,
    borderRadius: 12,
    marginBottom: 15,
  },

  input: {
    flex: 1,
    marginLeft: 10,
    fontSize: 16,
  },

  saveBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
  },

  saveText: { color: "white", fontSize: 16, fontWeight: "600" },

  back: { marginTop: 20, alignItems: "center" },
  backText: { color: "blue", fontSize: 16, fontWeight: "500" },
});
</file>

<file path="app/(tabs-user)/profile/index.tsx">
import React, { useState, useCallback } from "react";
import { View, Text, StyleSheet, TouchableOpacity, ScrollView } from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router, useFocusEffect } from "expo-router";

export default function ProfileScreen() {
  const [user, setUser] = useState<any>(null);

  useFocusEffect(
    useCallback(() => {
      const loadUser = async () => {
        try {
          const storedUser = await AsyncStorage.getItem("userData");

          if (storedUser) {
            setUser(JSON.parse(storedUser));
          } else {
            setUser({
              name: "Guest User",
              email: "guest@example.com",
              phone: "0000000000",
            });
          }
        } catch (err) {
          console.log("Error loading user data", err);
          setUser({
            name: "Guest User",
            email: "guest@example.com",
            phone: "0000000000",
          });
        }
      };

      loadUser();
    }, [])
  );

  if (!user) return null;

  return (
    <ScrollView style={styles.container}>
      {/* Profile Card */}
      <View style={styles.card}>
        <View style={styles.avatar}>
          <Ionicons name="person" size={50} color="#555" />
        </View>

        <Text style={styles.name}>{user.name}</Text>
        <Text style={styles.info}>{user.email}</Text>
        <Text style={styles.info}>{user.phone}</Text>
      </View>

      {/* ACCOUNT SECTION */}
      <Text style={styles.sectionTitle}>Account</Text>

      <View style={styles.sectionCard}>
        <ProfileItem
          icon="create-outline"
          label="Edit Profile"
          onPress={() => router.push("/(tabs-user)/profile/edit-profile")}
        />

        <ProfileItem
          icon="key-outline"
          label="Change Password"
          onPress={() => router.push("/(tabs-user)/profile/change-password")}
        />

        <ProfileItem
          icon="shield-checkmark-outline"
          label="KYC Verification"
          onPress={() => router.push("/(tabs-user)/profile/kyc")}
        />

        <ProfileItem
          icon="car-sport-outline"
          label="Vehicle Management"
          onPress={() => router.push("/(tabs-user)/profile/usage-management")}
        />

        <ProfileItem
          icon="gift-outline"
          label="Refer & Earn"
          onPress={() => router.push("/(tabs-user)/profile/refer-and-earn")}
        />
      </View>

      {/* APP SETTINGS */}
      <Text style={styles.sectionTitle}>App Settings</Text>

      <View style={styles.sectionCard}>
        <ProfileItem
          icon="notifications-outline"
          label="Notifications"
          onPress={() => router.push("/(tabs-user)/profile/notifications")}
        />

        <ProfileItem
          icon="settings-outline"
          label="Settings"
          onPress={() => router.push("/(tabs-user)/profile/settings")}
        />

        <ProfileItem
          icon="help-circle-outline"
          label="Support"
          onPress={() => router.push("/(tabs-user)/profile/support")}
        />
      </View>

      {/* LOGOUT */}
      <TouchableOpacity
        style={styles.logoutBtn}
        onPress={async () => {
          await AsyncStorage.removeItem("userData");
          router.replace("/(auth)/login");
        }}
      >
        <Ionicons name="log-out-outline" size={22} color="white" />
        <Text style={styles.logoutText}>Logout</Text>
      </TouchableOpacity>

      <View style={{ height: 40 }} />
    </ScrollView>
  );
}

/* COMPONENT: Profile Item Row */
const ProfileItem = ({ icon, label, onPress }: any) => (
  <TouchableOpacity style={styles.row} onPress={onPress}>
    <View style={styles.rowLeft}>
      <Ionicons name={icon} size={22} color="#000" />
      <Text style={styles.rowLabel}>{label}</Text>
    </View>
    <Ionicons name="chevron-forward" size={20} color="#777" />
  </TouchableOpacity>
);

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#f3f4f6",
    paddingHorizontal: 20,
  },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    paddingVertical: 30,
    paddingHorizontal: 20,
    alignItems: "center",
    elevation: 4,
    marginTop: 60,
  },

  avatar: {
    backgroundColor: "#e5e7eb",
    width: 90,
    height: 90,
    borderRadius: 45,
    alignItems: "center",
    justifyContent: "center",
    marginBottom: 15,
  },

  name: { fontSize: 24, fontWeight: "bold", marginBottom: 5 },
  info: { fontSize: 15, color: "#555" },

  sectionTitle: {
    marginTop: 25,
    marginBottom: 8,
    fontSize: 18,
    fontWeight: "700",
    color: "#333",
  },

  sectionCard: {
    backgroundColor: "white",
    borderRadius: 15,
    paddingHorizontal: 15,
    paddingVertical: 5,
    elevation: 2,
  },

  row: {
    flexDirection: "row",
    justifyContent: "space-between",
    paddingVertical: 15,
    borderBottomWidth: 1,
    borderColor: "#e5e5e5",
  },

  rowLeft: {
    flexDirection: "row",
    alignItems: "center",
  },

  rowLabel: {
    fontSize: 16,
    fontWeight: "500",
    marginLeft: 12,
  },

  logoutBtn: {
    backgroundColor: "#b91c1c",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "center",
    padding: 14,
    borderRadius: 12,
    marginTop: 30,
  },

  logoutText: {
    color: "white",
    fontSize: 16,
    fontWeight: "600",
    marginLeft: 10,
  },
});
</file>

<file path="app/(tabs-user)/profile/kyc.tsx">
import React, { useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TextInput,
  TouchableOpacity,
  Alert,
} from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function KycScreen() {
  const [fullName, setFullName] = useState("");
  const [aadhaar, setAadhaar] = useState("");
  const [pan, setPan] = useState("");

  const handleSubmit = () => {
    if (!fullName || !aadhaar || !pan) {
      Alert.alert("Error", "All fields are required!");
      return;
    }

    if (aadhaar.length !== 12) {
      Alert.alert("Invalid Aadhaar", "Aadhaar number must be 12 digits!");
      return;
    }

    if (pan.length !== 10) {
      Alert.alert("Invalid PAN", "PAN number must be 10 characters!");
      return;
    }

    Alert.alert("Success", "KYC submitted successfully!");
    router.back();
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>KYC Verification üîê</Text>

      <View style={styles.card}>
        <View style={styles.inputBox}>
          <Ionicons name="person-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Full Name"
            value={fullName}
            onChangeText={setFullName}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="card-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="Aadhaar Number"
            keyboardType="number-pad"
            maxLength={12}
            value={aadhaar}
            onChangeText={setAadhaar}
          />
        </View>

        <View style={styles.inputBox}>
          <Ionicons name="document-text-outline" size={22} color="#666" />
          <TextInput
            style={styles.input}
            placeholder="PAN Number"
            autoCapitalize="characters"
            maxLength={10}
            value={pan}
            onChangeText={setPan}
          />
        </View>
      </View>

      <TouchableOpacity style={styles.saveBtn} onPress={handleSubmit}>
        <Text style={styles.saveText}>Submit KYC</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/profile")} style={{ marginTop: 20 }}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20, textAlign: "center" },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    padding: 20,
    elevation: 4,
  },

  inputBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#F3F4F6",
    padding: 12,
    borderRadius: 12,
    marginBottom: 15,
  },

  input: {
    flex: 1,
    marginLeft: 10,
    fontSize: 16,
  },

  saveBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
    marginTop: 25,
  },

  saveText: { color: "white", fontSize: 16, fontWeight: "bold" },

  back: { fontSize: 16, color: "blue", fontWeight: "500" },
});
</file>

<file path="app/(tabs-user)/profile/notifications.tsx">
import React, { useState } from "react";
import { View, Text, StyleSheet, Switch, TouchableOpacity } from "react-native";
import { router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function NotificationsScreen() {
  const [chargingUpdates, setChargingUpdates] = useState(true);
  const [walletAlerts, setWalletAlerts] = useState(true);
  const [promoAlerts, setPromoAlerts] = useState(false);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Notifications üîî</Text>

      <View style={styles.card}>
        <View style={styles.row}>
          <Text style={styles.label}>Charging Updates</Text>
          <Switch value={chargingUpdates} onValueChange={setChargingUpdates} />
        </View>

        <View style={styles.row}>
          <Text style={styles.label}>Wallet Alerts</Text>
          <Switch value={walletAlerts} onValueChange={setWalletAlerts} />
        </View>

        <View style={styles.row}>
          <Text style={styles.label}>Promotions & Offers</Text>
          <Switch value={promoAlerts} onValueChange={setPromoAlerts} />
        </View>
      </View>

      <TouchableOpacity style={styles.backBtn} onPress={() => router.navigate("/(tabs-user)/profile")}>
        <Text style={styles.backTxt}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20 },
  card: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 15,
    elevation: 4,
  },

  row: {
    flexDirection: "row",
    justifyContent: "space-between",
    marginBottom: 22,
  },

  label: { fontSize: 17, fontWeight: "500" },

  backBtn: { marginTop: 30 },
  backTxt: { color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/profile/refer-and-earn.tsx">
import React, { useEffect, useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TouchableOpacity,
  Share,
  Alert,
} from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import * as Clipboard from "expo-clipboard";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { router } from "expo-router";

export default function ReferAndEarn() {
  const [referralCode, setReferralCode] = useState("");

  useEffect(() => {
    const load = async () => {
      const storedUser = await AsyncStorage.getItem("userData");
      if (storedUser) {
        const user = JSON.parse(storedUser);

        // generate referral code based on name + random
        const code =
          (user.name?.split(" ")[0] || "USER").toUpperCase() +
          Math.floor(1000 + Math.random() * 9000);

        setReferralCode(code);
      } else {
        setReferralCode("USER1234");
      }
    };
    load();
  }, []);

  const copyCode = () => {
    Clipboard.setStringAsync(referralCode);
    Alert.alert("Copied!", "Referral code copied to clipboard.");
  };

  const shareApp = async () => {
    try {
      await Share.share({
        message: `Hey! Use my referral code ${referralCode} and earn rewards on your first EV charge.\nDownload the ChargeLink app now!`,
      });
    } catch (error) {
      console.log("Share error:", error);
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Refer & Earn üéÅ</Text>

      <View style={styles.card}>
        <Text style={styles.subtitle}>Your Referral Code</Text>

        <View style={styles.refBox}>
          <Text style={styles.refCode}>{referralCode}</Text>
          <TouchableOpacity onPress={copyCode}>
            <Ionicons name="copy-outline" size={22} color="#000" />
          </TouchableOpacity>
        </View>

        <Text style={styles.text}>
          Share your code with friends and earn rewards when they complete their
          first EV charging!
        </Text>

        <TouchableOpacity style={styles.shareBtn} onPress={shareApp}>
          <Ionicons name="share-social-outline" size={20} color="white" />
          <Text style={styles.shareText}>Share Code</Text>
        </TouchableOpacity>
      </View>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/profile")} style={{ marginTop: 25 }}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 28, fontWeight: "bold", textAlign: "center" },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    padding: 25,
    marginTop: 20,
    elevation: 5,
  },

  subtitle: {
    fontSize: 18,
    fontWeight: "600",
    marginBottom: 12,
    textAlign: "center",
  },

  refBox: {
    flexDirection: "row",
    backgroundColor: "#F3F4F6",
    padding: 15,
    borderRadius: 12,
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 15,
  },

  refCode: {
    fontSize: 20,
    fontWeight: "bold",
    letterSpacing: 2,
  },

  text: {
    textAlign: "center",
    color: "#555",
    marginBottom: 20,
    fontSize: 15,
  },

  shareBtn: {
    flexDirection: "row",
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
    justifyContent: "center",
  },

  shareText: {
    color: "white",
    fontSize: 16,
    marginLeft: 8,
    fontWeight: "600",
  },

  back: { fontSize: 16, color: "blue", fontWeight: "500", textAlign: "center" },
});
</file>

<file path="app/(tabs-user)/profile/settings.tsx">
import React, { useState } from "react";
import { View, Text, StyleSheet, Switch, TouchableOpacity } from "react-native";
import { router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function SettingsScreen() {
  const [darkMode, setDarkMode] = useState(false);
  const [autoUpdate, setAutoUpdate] = useState(true);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>App Settings ‚öôÔ∏è</Text>

      <View style={styles.card}>
        <View style={styles.row}>
          <Text style={styles.label}>Dark Mode</Text>
          <Switch value={darkMode} onValueChange={setDarkMode} />
        </View>

        <View style={styles.row}>
          <Text style={styles.label}>Auto App Updates</Text>
          <Switch value={autoUpdate} onValueChange={setAutoUpdate} />
        </View>
      </View>

      <TouchableOpacity
        style={styles.rowButton}
        onPress={() => router.navigate("/(tabs-user)/profile/notifications")}
      >
        <Ionicons name="notifications-outline" size={22} />
        <Text style={styles.rowButtonText}>Notification Settings</Text>
      </TouchableOpacity>

      <TouchableOpacity
        style={styles.rowButton}
        onPress={() => router.navigate("/(tabs-user)/profile/support")}
      >
        <Ionicons name="help-circle-outline" size={22} />
        <Text style={styles.rowButtonText}>Help & Support</Text>
      </TouchableOpacity>

      <TouchableOpacity style={{ marginTop: 30 }} onPress={() => router.navigate("/(tabs-user)/profile")}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },

  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20 },

  card: {
    backgroundColor: "white",
    padding: 22,
    borderRadius: 15,
    elevation: 4,
    marginBottom: 25,
  },

  row: {
    flexDirection: "row",
    justifyContent: "space-between",
    marginBottom: 20,
  },

  label: { fontSize: 17, fontWeight: "500" },

  rowButton: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 14,
  },

  rowButtonText: {
    marginLeft: 12,
    fontSize: 17,
    fontWeight: "600",
  },

  back: { fontSize: 16, color: "blue", fontWeight: "500" },
});
</file>

<file path="app/(tabs-user)/profile/support.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity, Linking } from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function SupportScreen() {
  const openEmail = () => {
    Linking.openURL("mailto:support@chargelink.com");
  };

  const openCall = () => {
    Linking.openURL("tel:+919876543210");
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Help & Support üí¨</Text>

      <View style={styles.card}>
        <TouchableOpacity style={styles.row} onPress={openEmail}>
          <Ionicons name="mail-outline" size={24} color="black" />
          <Text style={styles.text}>Email Support</Text>
        </TouchableOpacity>

        <TouchableOpacity style={styles.row} onPress={openCall}>
          <Ionicons name="call-outline" size={24} color="black" />
          <Text style={styles.text}>Call Support</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.row}
          onPress={() => Linking.openURL("https://www.chargelink.com/support")}
        >
          <Ionicons name="globe-outline" size={24} color="black" />
          <Text style={styles.text}>Visit Help Center</Text>
        </TouchableOpacity>
      </View>

      <TouchableOpacity style={styles.backBtn} onPress={() => router.navigate("/(tabs-user)/profile")}>
        <Text style={styles.backTxt}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20 },
  card: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 15,
    elevation: 4,
  },

  row: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 15,
  },

  text: {
    marginLeft: 15,
    fontSize: 17,
    fontWeight: "500",
  },

  backBtn: { marginTop: 30 },
  backTxt: { color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/profile/usage-management.tsx">
import React, { useState, useEffect } from "react";
import {
  View,
  Text,
  StyleSheet,
  TextInput,
  TouchableOpacity,
  FlatList,
  Alert,
  ScrollView,
} from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function UsageManagement() {
  const [vehicles, setVehicles] = useState<any[]>([]);
  const [model, setModel] = useState("");
  const [number, setNumber] = useState("");

  useEffect(() => {
    const load = async () => {
      const saved = await AsyncStorage.getItem("vehicles");
      if (saved) setVehicles(JSON.parse(saved));
    };
    load();
  }, []);

  const saveVehicles = async (list: any[]) => {
    setVehicles(list);
    await AsyncStorage.setItem("vehicles", JSON.stringify(list));
  };

  const handleAdd = () => {
    if (!model || !number) {
      Alert.alert("Error", "Please fill all fields!");
      return;
    }

    const newVehicle = {
      id: Date.now(),
      model,
      number,
    };

    const updated = [...vehicles, newVehicle];
    saveVehicles(updated);

    setModel("");
    setNumber("");

    Alert.alert("Success", "Vehicle added successfully!");
  };

  const deleteVehicle = (id: number) => {
    const filtered = vehicles.filter((v) => v.id !== id);
    saveVehicles(filtered);
  };

  return (
    <ScrollView style={styles.scroll} contentContainerStyle={{ paddingBottom: 40 }}>
      <View style={styles.container}>
        <Text style={styles.title}>Vehicle Management üöó</Text>

        {/* Add New Vehicle */}
        <View style={styles.card}>
          <Text style={styles.subtitle}>Add New Vehicle</Text>

          <View style={styles.inputBox}>
            <Ionicons name="car-outline" size={22} color="#666" />
            <TextInput
              style={styles.input}
              placeholder="Vehicle Model (e.g. Ola S1 Pro)"
              value={model}
              onChangeText={setModel}
            />
          </View>

          <View style={styles.inputBox}>
            <Ionicons name="pricetag-outline" size={22} color="#666" />
            <TextInput
              style={styles.input}
              placeholder="Vehicle Number"
              value={number}
              onChangeText={setNumber}
            />
          </View>

          <TouchableOpacity style={styles.addBtn} onPress={handleAdd}>
            <Text style={styles.addText}>Add Vehicle</Text>
          </TouchableOpacity>
        </View>

        {/* Saved vehicles */}
        <Text style={styles.listTitle}>Your Vehicles</Text>

        {vehicles.length === 0 ? (
          <Text style={{ color: "#666", marginTop: 10 }}>No vehicles added yet.</Text>
        ) : (
          vehicles.map((item) => (
            <View key={item.id} style={styles.vehicleCard}>
              <View>
                <Text style={styles.vehicleModel}>{item.model}</Text>
                <Text style={styles.vehicleNumber}>{item.number}</Text>
              </View>

              <TouchableOpacity onPress={() => deleteVehicle(item.id)}>
                <Ionicons name="trash-outline" size={24} color="red" />
              </TouchableOpacity>
            </View>
          ))
        )}

        {/* Back Button (Fixed spacing) */}
        <TouchableOpacity
          onPress={() => router.navigate("/(tabs-user)/profile")}
          style={{ marginTop: 30, marginBottom: 10 }}
        >
          <Text style={styles.back}>‚Üê Back</Text>
        </TouchableOpacity>
      </View>
    </ScrollView>
  );
}

const styles = StyleSheet.create({
  scroll: {
    flex: 1,
    backgroundColor: "#f3f4f6",
  },
  container: {
    flex: 1,
    paddingTop: 70,
    paddingHorizontal: 20,
  },

  title: { fontSize: 26, fontWeight: "bold", textAlign: "center" },

  card: {
    backgroundColor: "white",
    borderRadius: 20,
    padding: 20,
    elevation: 4,
    marginTop: 20,
  },

  subtitle: {
    fontSize: 18,
    fontWeight: "600",
    marginBottom: 15,
  },

  inputBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#F3F4F6",
    padding: 12,
    borderRadius: 12,
    marginBottom: 15,
  },

  input: { flex: 1, marginLeft: 10, fontSize: 16 },

  addBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
  },

  addText: { color: "white", fontSize: 16, fontWeight: "bold" },

  listTitle: {
    marginTop: 30,
    fontSize: 20,
    fontWeight: "600",
  },

  vehicleCard: {
    flexDirection: "row",
    justifyContent: "space-between",
    backgroundColor: "white",
    padding: 15,
    borderRadius: 12,
    marginBottom: 12,
    elevation: 2,
  },

  vehicleModel: { fontSize: 17, fontWeight: "600" },
  vehicleNumber: { fontSize: 15, color: "#555" },

  back: {
    fontSize: 16,
    color: "blue",
    fontWeight: "500",
    textAlign: "center",
  },
});
</file>

<file path="app/(tabs-user)/search/booking.tsx">
import React, { useState } from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useLocalSearchParams, router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function BookingScreen() {
  const { stationId, name } = useLocalSearchParams();

  const [selectedSlot, setSelectedSlot] = useState("");

  const slots = ["08:00 AM", "10:00 AM", "12:00 PM", "02:00 PM", "04:00 PM"];

  const handleBooking = () => {
    if (!selectedSlot) {
      alert("Please select a time slot!");
      return;
    }

    router.navigate({
      pathname: "/(tabs-user)/search/payment-summary",
      params: {
        stationId,
        name,
        slot: selectedSlot,
      },
    });
  };

  return (
    <View style={styles.container}>

      {/* Header */}
      <View style={styles.header}>
        <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/search/charger")}>
          <Ionicons name="arrow-back" size={24} color="black" />
        </TouchableOpacity>
        <Text style={styles.headerTitle}>Confirm Booking</Text>
      </View>

      {/* Station Details */}
      <View style={styles.infoCard}>
        <Text style={styles.label}>Station Name:</Text>
        <Text style={styles.value}>{name}</Text>

        <Text style={styles.label}>Station ID:</Text>
        <Text style={styles.value}>{stationId}</Text>
      </View>

      {/* Time Slots */}
      <Text style={styles.section}>Select Charging Slot</Text>
      <View style={styles.slotContainer}>
        {slots.map((slot) => (
          <TouchableOpacity
            key={slot}
            style={[
              styles.slot,
              selectedSlot === slot && styles.selectedSlot,
            ]}
            onPress={() => setSelectedSlot(slot)}
          >
            <Text
              style={[
                styles.slotText,
                selectedSlot === slot && styles.slotTextSelected,
              ]}
            >
              {slot}
            </Text>
          </TouchableOpacity>
        ))}
      </View>

      {/* Proceed to Payment */}
      <TouchableOpacity style={styles.btn} onPress={handleBooking}>
        <Text style={styles.btnText}>Proceed to Payment</Text>
      </TouchableOpacity>

    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, paddingTop: 60, backgroundColor: "#f3f4f6" },

  header: {
    flexDirection: "row",
    alignItems: "center",
    marginBottom: 25,
  },
  headerTitle: {
    fontSize: 22,
    fontWeight: "bold",
    marginLeft: 10,
  },

  infoCard: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 12,
    elevation: 2,
    marginBottom: 25,
  },

  label: { fontSize: 16, fontWeight: "600" },
  value: { fontSize: 16, color: "#444", marginBottom: 10 },

  section: { fontSize: 20, fontWeight: "600", marginBottom: 10 },

  slotContainer: {
    flexDirection: "row",
    flexWrap: "wrap",
    gap: 10,
    marginBottom: 25,
  },

  slot: {
    paddingVertical: 10,
    paddingHorizontal: 15,
    borderRadius: 10,
    backgroundColor: "#E5E7EB",
  },

  selectedSlot: {
    backgroundColor: "#111827",
  },

  slotText: { color: "#333", fontSize: 15 },
  slotTextSelected: { color: "white", fontWeight: "600" },

  btn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
  },

  btnText: { color: "white", fontSize: 18, fontWeight: "600" },
});
</file>

<file path="app/(tabs-user)/search/charger.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useLocalSearchParams, router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function ChargerDetails() {
  const { id, name, distance, price } = useLocalSearchParams();

  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.header}>
        <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/search")}>
          <Ionicons name="arrow-back" size={24} color="black" />
        </TouchableOpacity>

        <Text style={styles.headerTitle}>Charger Details</Text>
      </View>

      {/* Station Name */}
      <Text style={styles.title}>{name}</Text>

      {/* Basic Info */}
      <View style={styles.card}>
        <Text style={styles.label}>üìç Distance:</Text>
        <Text style={styles.value}>{distance}</Text>

        <Text style={styles.label}>‚ö° Price:</Text>
        <Text style={styles.value}>{price}</Text>

        <Text style={styles.label}>üîå Available Slots:</Text>
        <Text style={styles.value}>4 (Dummy)</Text>
      </View>

      {/* Section: Amenities */}
      <Text style={styles.section}>Amenities</Text>
      <View style={styles.card}>
        <Text>‚úî Parking Available</Text>
        <Text>‚úî CCTV Security</Text>
        <Text>‚úî 24/7 Support</Text>
      </View>

      {/* Section: Charger Types */}
      <Text style={styles.section}>Charger Types</Text>
      <View style={styles.card}>
        <Text>‚ö° CCS2 ‚Äî Fast Charging</Text>
        <Text>‚ö° Type-2 ‚Äî Slow Charging</Text>
      </View>

      {/* Book Now Button */}
      <TouchableOpacity
        style={styles.bookBtn}
        onPress={() =>
          router.navigate({
            pathname: "/(tabs-user)/search/booking",
            params: { stationId: id, name },
          })
        }
      >
        <Text style={styles.bookText}>Book Slot</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, paddingTop: 60, backgroundColor: "#f3f4f6" },

  header: { flexDirection: "row", alignItems: "center", marginBottom: 20 },
  headerTitle: { fontSize: 22, fontWeight: "bold", marginLeft: 10 },

  title: { fontSize: 24, fontWeight: "bold", marginBottom: 20 },

  card: {
    backgroundColor: "white",
    padding: 15,
    borderRadius: 12,
    marginBottom: 20,
    elevation: 2,
  },

  label: { fontWeight: "600", marginTop: 5 },
  value: { color: "#444", marginBottom: 5 },

  section: { fontSize: 20, fontWeight: "600", marginBottom: 10 },

  bookBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 10,
    alignItems: "center",
    marginTop: 20,
  },

  bookText: { color: "white", fontSize: 18, fontWeight: "600" },
});
</file>

<file path="app/(tabs-user)/search/filter.tsx">
import React, { useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TextInput,
  TouchableOpacity,
  Modal,
  ScrollView,
} from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function SearchFilter() {
  const [search, setSearch] = useState("");
  const [modalVisible, setModalVisible] = useState(false);

  // Filters
  const [distance, setDistance] = useState("10");
  const [chargerType, setChargerType] = useState<string[]>([]);
  const [availability, setAvailability] = useState("");
  const [priceRange, setPriceRange] = useState("any");

  const toggleType = (type: string) => {
    if (chargerType.includes(type)) {
      setChargerType(chargerType.filter((t) => t !== type));
    } else {
      setChargerType([...chargerType, type]);
    }
  };

  const resetFilters = () => {
    setSearch("");
    setDistance("10");
    setChargerType([]);
    setAvailability("");
    setPriceRange("any");
  };

  const applyFilters = () => {
    router.navigate({
      pathname: "/(tabs-user)/map",
      params: {
        search,
        distance,
        chargerType: JSON.stringify(chargerType),
        availability,
        priceRange,
      },
    });
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Search Stations üîç</Text>

      {/* Search Bar */}
      <View style={styles.searchBox}>
        <Ionicons name="search-outline" size={22} color="#777" />
        <TextInput
          style={styles.input}
          placeholder="Search by station name or location"
          value={search}
          onChangeText={setSearch}
        />
      </View>

      {/* Filter Button */}
      <TouchableOpacity
        style={styles.filterBtn}
        onPress={() => setModalVisible(true)}
      >
        <Ionicons name="options-outline" size={22} color="white" />
        <Text style={styles.filterText}>Open Filters</Text>
      </TouchableOpacity>

      {/* Apply Search */}
      <TouchableOpacity style={styles.searchBtn} onPress={applyFilters}>
        <Text style={styles.searchBtnText}>Apply Search</Text>
      </TouchableOpacity>

      {/* Back Button */}
      <TouchableOpacity
        style={{ marginTop: 25 }}
        onPress={() => router.navigate("/(tabs-user)/search")}
      >
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>

      {/* Filter Modal */}
      <Modal visible={modalVisible} animationType="slide">
        <ScrollView style={styles.modalContainer}>
          <Text style={styles.modalTitle}>Filters</Text>

          {/* Distance */}
          <Text style={styles.sectionTitle}>Distance</Text>
          <View style={styles.row}>
            {["5", "10", "20", "50"].map((d) => (
              <TouchableOpacity
                key={d}
                style={[
                  styles.option,
                  distance === d && styles.selectedOption,
                ]}
                onPress={() => setDistance(d)}
              >
                <Text
                  style={[
                    styles.optionText,
                    distance === d && styles.optionTextSelected,
                  ]}
                >
                  {d} km
                </Text>
              </TouchableOpacity>
            ))}
          </View>

          {/* Charger Type */}
          <Text style={styles.sectionTitle}>Charger Type</Text>
          <View style={styles.row}>
            {["CCS2", "Type2", "CHAdeMO", "GB/T"].map((t) => (
              <TouchableOpacity
                key={t}
                style={[
                  styles.option,
                  chargerType.includes(t) && styles.selectedOption,
                ]}
                onPress={() => toggleType(t)}
              >
                <Text
                  style={[
                    styles.optionText,
                    chargerType.includes(t) && styles.optionTextSelected,
                  ]}
                >
                  {t}
                </Text>
              </TouchableOpacity>
            ))}
          </View>

          {/* Availability */}
          <Text style={styles.sectionTitle}>Availability</Text>
          <View style={styles.row}>
            {["available", "busy"].map((a) => (
              <TouchableOpacity
                key={a}
                style={[
                  styles.option,
                  availability === a && styles.selectedOption,
                ]}
                onPress={() => setAvailability(a)}
              >
                <Text
                  style={[
                    styles.optionText,
                    availability === a && styles.optionTextSelected,
                  ]}
                >
                  {a === "available" ? "Available" : "Busy"}
                </Text>
              </TouchableOpacity>
            ))}
          </View>

          {/* Price Range */}
          <Text style={styles.sectionTitle}>Price Range</Text>
          <View style={styles.row}>
            {["any", "low", "medium", "high"].map((p) => (
              <TouchableOpacity
                key={p}
                style={[
                  styles.option,
                  priceRange === p && styles.selectedOption,
                ]}
                onPress={() => setPriceRange(p)}
              >
                <Text
                  style={[
                    styles.optionText,
                    priceRange === p && styles.optionTextSelected,
                  ]}
                >
                  {p.toUpperCase()}
                </Text>
              </TouchableOpacity>
            ))}
          </View>

          {/* Buttons */}
          <TouchableOpacity style={styles.applyBtn} onPress={applyFilters}>
            <Text style={styles.applyText}>Apply Filters</Text>
          </TouchableOpacity>

          <TouchableOpacity style={styles.resetBtn} onPress={resetFilters}>
            <Text style={styles.resetText}>Reset</Text>
          </TouchableOpacity>

          <TouchableOpacity
            style={{ marginTop: 25 }}
            onPress={() => setModalVisible(false)}
          >
            <Text style={styles.back}>Close</Text>
          </TouchableOpacity>
        </ScrollView>
      </Modal>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, paddingTop: 70, paddingHorizontal: 20 },
  title: { fontSize: 26, fontWeight: "bold" },

  searchBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#F3F4F6",
    padding: 12,
    borderRadius: 12,
    marginTop: 20,
  },

  input: { flex: 1, marginLeft: 10, fontSize: 16 },

  filterBtn: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#000",
    padding: 12,
    borderRadius: 12,
    marginTop: 20,
  },

  filterText: { color: "white", marginLeft: 10, fontSize: 16, fontWeight: "600" },

  searchBtn: {
    marginTop: 25,
    backgroundColor: "#2563EB",
    padding: 14,
    borderRadius: 12,
    alignItems: "center",
  },

  searchBtnText: { color: "white", fontSize: 17, fontWeight: "600" },
  back: { fontSize: 16, color: "blue", fontWeight: "500", textAlign: "center" },

  modalContainer: { flex: 1, padding: 20, paddingTop: 60 },
  modalTitle: { fontSize: 26, fontWeight: "bold" },

  sectionTitle: {
    fontSize: 18,
    marginTop: 25,
    marginBottom: 10,
    fontWeight: "600",
  },

  row: {
    flexDirection: "row",
    flexWrap: "wrap",
    gap: 10,
  },

  option: {
    paddingVertical: 10,
    paddingHorizontal: 15,
    backgroundColor: "#E5E7EB",
    borderRadius: 10,
  },

  selectedOption: {
    backgroundColor: "#111827",
  },

  optionText: { fontSize: 15, color: "#333" },
  optionTextSelected: { color: "white" },

  applyBtn: {
    marginTop: 30,
    backgroundColor: "#111827",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
  },

  applyText: { color: "white", fontSize: 17, fontWeight: "600" },

  resetBtn: {
    marginTop: 15,
    borderWidth: 2,
    borderColor: "#666",
    padding: 12,
    borderRadius: 12,
    alignItems: "center",
  },

  resetText: { color: "#444", fontSize: 16, fontWeight: "500" },
});
</file>

<file path="app/(tabs-user)/search/index.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, TouchableOpacity, StyleSheet, FlatList } from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { useRouter } from "expo-router";

export default function SearchScreen() {
  const [searchText, setSearchText] = useState("");
  const router = useRouter();

  // Dummy data ‚Äî backend se baad me replace
  const chargers = [
    { id: "1", name: "EV Station - Sector 21", distance: "2.3 km", price: "‚Çπ18 / kWh" },
    { id: "2", name: "GreenCharge Point", distance: "4.1 km", price: "‚Çπ20 / kWh" },
    { id: "3", name: "SuperFast EV Charger", distance: "1.2 km", price: "‚Çπ16 / kWh" },
  ];

  return (
    <View style={styles.container}>
      {/* üü¢ SEARCH BAR */}
      <View style={styles.searchBox}>
        <Ionicons name="search" size={20} color="#666" />
        <TextInput
          placeholder="Search chargers, locations..."
          style={styles.input}
          value={searchText}
          onChangeText={setSearchText}
        />

        {/* üî¥ CLEAR BUTTON */}
        {searchText.length > 0 && (
          <TouchableOpacity onPress={() => setSearchText("")}>
            <Ionicons name="close-circle" size={18} color="#666" />
          </TouchableOpacity>
        )}
      </View>

      {/* ‚öô FILTER + üìçMAP BUTTON */}
      <View style={styles.row}>
        <TouchableOpacity style={styles.filterBtn} onPress={() => router.navigate("/(tabs-user)/search/filter")}>
          <Ionicons name="options" size={18} />
          <Text style={styles.btnText}>Filters</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.mapBtn}
          onPress={() => router.push("/(tabs-user)/map")}
        >
          <Ionicons name="map" size={18} color="white" />
          <Text style={[styles.btnText, { color: "white" }]}>Map View</Text>
        </TouchableOpacity>
      </View>

      {/* üìã LIST OF CHARGERS */}
      <FlatList
        data={chargers}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          <TouchableOpacity
            style={styles.card}
            onPress={() =>
              router.push({
                pathname: "/(tabs-user)/search/charger",
                params: {
                  id: item.id,
                  name: item.name,
                  distance: item.distance,
                  price: item.price,
                },
              })
            }
          >
            <Text style={styles.cardTitle}>{item.name}</Text>
            <Text style={styles.cardSub}>üìç {item.distance}</Text>
            <Text style={styles.cardPrice}>‚ö° {item.price}</Text>
          </TouchableOpacity>
        )}
      />

    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 15, backgroundColor: "#f2f2f2" },

  searchBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "white",
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderRadius: 10,
    elevation: 2,
  },
  input: { flex: 1, marginLeft: 8 },

  row: { flexDirection: "row", justifyContent: "space-between", marginVertical: 12 },

  filterBtn: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "white",
    padding: 10,
    borderRadius: 10,
    elevation: 2,
  },
  mapBtn: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "black",
    padding: 10,
    borderRadius: 10,
    elevation: 2,
  },
  btnText: { marginLeft: 6, fontWeight: "bold" },

  card: {
    backgroundColor: "white",
    padding: 15,
    marginVertical: 8,
    borderRadius: 10,
    elevation: 2,
  },
  cardTitle: { fontSize: 18, fontWeight: "bold" },
  cardSub: { color: "#555", marginTop: 4 },
  cardPrice: { marginTop: 4, fontWeight: "600" },
});
</file>

<file path="app/(tabs-user)/search/invoice.tsx">
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { router, useRouter } from "expo-router";

export default function InvoiceScreen() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Invoice üßæ</Text>
      <Text>User: Demo User</Text>
      <Text>Charger: EV Station 21</Text>
      <Text>Amount Paid: ‚Çπ120</Text>
      <Text>Date: 23-Nov-2025</Text>

      <TouchableOpacity onPress={()=> router.push("/(tabs-user)/wallet/transactions")}>
        <Text style={{ color: "blue", marginTop: 20 }}>View Transactions</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center" },
  title: { fontSize: 24, fontWeight: "bold", marginBottom: 10 },
});
</file>

<file path="app/(tabs-user)/search/payment-done.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useLocalSearchParams, router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function PaymentDone() {
  const { stationId, name, slot, amount } = useLocalSearchParams();

  return (
    <View style={styles.container}>

      {/* Success Icon */}
      <View style={styles.iconWrap}>
        <Ionicons name="checkmark-circle" size={100} color="#10B981" />
      </View>

      <Text style={styles.title}>Payment Successful üéâ</Text>
      <Text style={styles.subtitle}>Your booking is confirmed</Text>

      {/* Summary Card */}
      <View style={styles.card}>
        <Text style={styles.label}>Station Name:</Text>
        <Text style={styles.value}>{name}</Text>

        <Text style={styles.label}>Slot:</Text>
        <Text style={styles.value}>{slot}</Text>

        <Text style={styles.label}>Amount Paid:</Text>
        <Text style={[styles.value, styles.amount]}>‚Çπ{amount}</Text>
      </View>

      {/* Rate Button */}
      <TouchableOpacity
        style={styles.rateBtn}
        onPress={() =>
          router.push({
            pathname: "/(tabs-user)/search/rating",
            params: { stationId, name },
          })
        }
      >
        <Text style={styles.rateText}>Rate Charger</Text>
      </TouchableOpacity>

      {/* Back to Home */}
      <TouchableOpacity
        style={styles.homeBtn}
        onPress={() => router.navigate("/(tabs-user)/home")}
      >
        <Text style={styles.homeText}>Back to Home</Text>
      </TouchableOpacity>

    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    paddingTop: 80,
    padding: 20,
    alignItems: "center",
    backgroundColor: "#f3f4f6",
  },

  iconWrap: {
    marginBottom: 20,
  },

  title: {
    fontSize: 26,
    fontWeight: "bold",
  },

  subtitle: {
    color: "#666",
    marginTop: 5,
    marginBottom: 20,
    fontSize: 16,
  },

  card: {
    backgroundColor: "white",
    padding: 20,
    width: "90%",
    borderRadius: 12,
    elevation: 3,
    marginBottom: 25,
  },

  label: {
    fontSize: 16,
    fontWeight: "600",
    marginTop: 10,
  },

  value: {
    fontSize: 16,
    color: "#444",
  },

  amount: {
    fontSize: 20,
    fontWeight: "700",
    marginTop: 5,
  },

  rateBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    width: "90%",
    alignItems: "center",
    marginBottom: 15,
  },

  rateText: { 
    color: "white", 
    fontSize: 18, 
    fontWeight: "600" 
  },

  homeBtn: {
    borderWidth: 2,
    borderColor: "#444",
    padding: 14,
    borderRadius: 12,
    width: "90%",
    alignItems: "center",
  },

  homeText: { 
    fontSize: 16, 
    fontWeight: "600", 
    color: "#444" 
  },
});
</file>

<file path="app/(tabs-user)/search/payment-summary.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useLocalSearchParams, router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function PaymentSummary() {
  const { stationId, name, slot } = useLocalSearchParams();

  const amount = 120; // Dummy amount (API se replace kar sakte ho)

  return (
    <View style={styles.container}>
      
      {/* Header */}
      <View style={styles.header}>
        <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/search/booking")}>
          <Ionicons name="arrow-back" size={24} color="black" />
        </TouchableOpacity>
        <Text style={styles.headerTitle}>Payment Summary</Text>
      </View>

      {/* Summary Card */}
      <View style={styles.card}>
        <Text style={styles.label}>Station Name:</Text>
        <Text style={styles.value}>{name}</Text>

        <Text style={styles.label}>Station ID:</Text>
        <Text style={styles.value}>{stationId}</Text>

        <Text style={styles.label}>Selected Slot:</Text>
        <Text style={styles.value}>{slot}</Text>

        <Text style={styles.label}>Amount:</Text>
        <Text style={[styles.value, styles.amount]}>‚Çπ{amount}.00</Text>
      </View>

      {/* Pay Button */}
      <TouchableOpacity
        style={styles.payBtn}
        onPress={() => router.navigate("/(tabs-user)/search/payment-done")}
      >
        <Text style={styles.payText}>Pay Now</Text>
      </TouchableOpacity>

    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    paddingTop: 60,
    padding: 20,
    backgroundColor: "#f3f4f6",
  },

  header: {
    flexDirection: "row",
    alignItems: "center",
    marginBottom: 25,
  },

  headerTitle: {
    fontSize: 22,
    fontWeight: "bold",
    marginLeft: 10,
  },

  card: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 12,
    elevation: 3,
    marginBottom: 25,
  },

  label: {
    fontSize: 16,
    fontWeight: "600",
    marginTop: 10,
  },

  value: {
    fontSize: 16,
    color: "#444",
  },

  amount: {
    fontSize: 20,
    fontWeight: "700",
    marginTop: 5,
  },

  payBtn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
  },

  payText: {
    color: "white",
    fontSize: 18,
    fontWeight: "600",
  },
});
</file>

<file path="app/(tabs-user)/search/rating.tsx">
import React, { useState } from "react";
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
} from "react-native";
import { useLocalSearchParams, router } from "expo-router";
import Ionicons from "@expo/vector-icons/Ionicons";

export default function RatingScreen() {
  const { stationId, name } = useLocalSearchParams();
  const [rating, setRating] = useState(0);
  const [review, setReview] = useState("");

  const handleSubmit = () => {
    if (rating === 0) {
      alert("Please select a star rating!");
      return;
    }

    alert("Thank you! Rating submitted ‚≠ê");
    router.push("/(tabs-user)/home");
  };

  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.header}>
        <TouchableOpacity onPress={() => router.back()}>
          <Ionicons name="arrow-back" size={24} color="black" />
        </TouchableOpacity>
        <Text style={styles.headerTitle}>Rate Your Experience</Text>
      </View>

      {/* Station Name */}
      <Text style={styles.stationName}>{name}</Text>

      <Text style={styles.subtitle}>How was your charging experience?</Text>

      {/* Stars */}
      <View style={styles.starRow}>
        {[1, 2, 3, 4, 5].map((i) => (
          <TouchableOpacity key={i} onPress={() => setRating(i)}>
            <Ionicons
              name={i <= rating ? "star" : "star-outline"}
              size={40}
              color={i <= rating ? "#FBBF24" : "#999"}
            />
          </TouchableOpacity>
        ))}
      </View>

      {/* Review Box */}
      <TextInput
        style={styles.input}
        placeholder="Write your feedback (optional)"
        multiline
        value={review}
        onChangeText={setReview}
      />

      {/* Submit Button */}
      <TouchableOpacity style={styles.btn} onPress={handleSubmit}>
        <Text style={styles.btnText}>Submit Rating</Text>
      </TouchableOpacity>

      {/* Back Home */}
      <TouchableOpacity onPress={() => router.push("/(tabs-user)/home")}>
        <Text style={styles.backHome}>‚Üê Back to Home</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    paddingTop: 70,
    paddingHorizontal: 20,
    backgroundColor: "#f3f4f6",
  },

  header: {
    flexDirection: "row",
    alignItems: "center",
    marginBottom: 25,
  },
  headerTitle: {
    fontSize: 22,
    fontWeight: "bold",
    marginLeft: 10,
  },

  stationName: {
    fontSize: 22,
    fontWeight: "700",
    marginBottom: 10,
    textAlign: "center",
  },

  subtitle: {
    textAlign: "center",
    color: "#666",
    marginBottom: 20,
    fontSize: 16,
  },

  starRow: {
    flexDirection: "row",
    justifyContent: "center",
    marginBottom: 20,
    gap: 10,
  },

  input: {
    backgroundColor: "white",
    borderRadius: 12,
    padding: 15,
    minHeight: 120,
    textAlignVertical: "top",
    elevation: 2,
    marginBottom: 20,
  },

  btn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 12,
    alignItems: "center",
    marginBottom: 15,
  },
  btnText: { color: "white", fontSize: 18, fontWeight: "600" },

  backHome: {
    textAlign: "center",
    color: "blue",
    fontSize: 16,
    fontWeight: "500",
  },
});
</file>

<file path="app/(tabs-user)/search/results.tsx">
import React, { useState } from "react";
import {
  View,
  Text,
  StyleSheet,
  TextInput,
  TouchableOpacity,
  FlatList,
} from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function SearchResults() {
  const [searchText, setSearchText] = useState("");

  const results = [
    { id: "1", name: "EV Station - Sector 21", distance: "2.3 km", price: "‚Çπ18/kWh" },
    { id: "2", name: "GreenCharge Station", distance: "4.1 km", price: "‚Çπ20/kWh" },
  ];

  return (
    <View style={styles.container}>
      {/* üîç Search Bar */}
      <View style={styles.searchBox}>
        <Ionicons name="search" size={20} color="#666" />
        <TextInput
          placeholder="Search chargers, locations..."
          style={styles.input}
          value={searchText}
          onChangeText={setSearchText}
        />

        {searchText.length > 0 && (
          <TouchableOpacity onPress={() => setSearchText("")}>
            <Ionicons name="close-circle" size={18} color="#666" />
          </TouchableOpacity>
        )}
      </View>

      {/* FILTER + MAP */}
      <View style={styles.row}>
        <TouchableOpacity
          style={styles.filterBtn}
          onPress={() => router.push("/(tabs-user)/search/filter")}
        >
          <Ionicons name="options" size={18} />
          <Text style={styles.btnText}>Filters</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.mapBtn}
          onPress={() => router.push("/(tabs-user)/map")}
        >
          <Ionicons name="map" size={18} color="white" />
          <Text style={[styles.btnText, { color: "white" }]}>Map View</Text>
        </TouchableOpacity>
      </View>

      {/* üî• Search Result List */}
      <FlatList
        data={results}
        keyExtractor={(item) => item.id}
        contentContainerStyle={{ paddingBottom: 40 }}
        renderItem={({ item }) => (
          <TouchableOpacity
            style={styles.card}
            onPress={() =>
              router.push({
                pathname: "/(tabs-user)/search/charger",
                params: {
                  id: item.id,
                  name: item.name,
                  distance: item.distance,
                  price: item.price,
                },
              })
            }
          >
            <Text style={styles.cardTitle}>{item.name}</Text>
            <Text style={styles.sub}>üìç {item.distance}</Text>
            <Text style={styles.price}>‚ö° {item.price}</Text>
          </TouchableOpacity>
        )}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 15, backgroundColor: "#f2f2f2" },

  searchBox: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "white",
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderRadius: 10,
    elevation: 2,
  },

  input: { flex: 1, marginLeft: 8 },

  row: { flexDirection: "row", justifyContent: "space-between", marginVertical: 12 },

  filterBtn: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "white",
    padding: 10,
    borderRadius: 10,
    elevation: 2,
  },

  mapBtn: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "black",
    padding: 10,
    borderRadius: 10,
    elevation: 2,
  },

  btnText: { marginLeft: 6, fontWeight: "bold" },

  card: {
    backgroundColor: "white",
    padding: 15,
    marginVertical: 8,
    borderRadius: 10,
    elevation: 2,
  },

  cardTitle: { fontWeight: "bold", fontSize: 17 },
  sub: { color: "#555", marginTop: 5 },
  price: { fontWeight: "600", marginTop: 5 },
});
</file>

<file path="app/(tabs-user)/wallet/add-money.tsx">
import { View, Text, StyleSheet, TextInput, TouchableOpacity } from "react-native";
import { useState } from "react";
import { useLocalSearchParams, router } from "expo-router";

export default function AddMoneyScreen() {
  const [amount, setAmount] = useState("");
  const { method } = useLocalSearchParams();

  const handlePay = () => {
    if (!amount) {
      alert("Please enter an amount!");
      return;
    }
    if (!method) {
      alert("Payment method not selected!");
      return;
    }

    if (method === "upi") {
      router.navigate("/(tabs-user)/wallet/payment-screen/upi");
    }
    else if (method === "card") {
      router.navigate("/(tabs-user)/wallet/payment-screen/card");
    }
    else if (method === "wallet") {
      router.navigate("/(tabs-user)/wallet/payment-screen/chargelinkwallet");
    }
    else {
      alert("Invalid payment method!");
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Add Money</Text>

      <Text style={styles.methodText}>
        Payment Method: <Text style={{ fontWeight: "bold" }}>{method}</Text>
      </Text>

      <TextInput
        style={styles.input} placeholder="Enter amount (Rs)" keyboardType="numeric" value={amount} onChangeText={setAmount} />

      <TouchableOpacity style={styles.btn} onPress={handlePay}>
        <Text style={styles.btnText}>Proceed to Pay</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, alignItems: "center", paddingTop: 100 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 10 },

  methodText: {
    fontSize: 16,
    marginBottom: 20,
    color: "#555",
  },

  input: {
    width: "80%",
    borderWidth: 1,
    borderColor: "#ccc",
    borderRadius: 10,
    padding: 10,
    marginBottom: 20,
    textAlign: "center",
  },

  btn: {
    backgroundColor: "black",
    padding: 12,
    borderRadius: 10,
    width: "70%",
    alignItems: "center",
  },

  btnText: { color: "white", fontWeight: "bold", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/wallet/index.tsx">
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { useRouter } from "expo-router";

export default function WalletScreen() {
  const router = useRouter();

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Wallet üí∞</Text>
      <Text style={styles.balance}>Current Balance: ‚Çπ0</Text>

      <TouchableOpacity style={styles.btn} onPress={() => router.navigate("/(tabs-user)/wallet/payment-method")}>
        <Text style={styles.btnText}>Add Money</Text>
      </TouchableOpacity>

      <TouchableOpacity style={[styles.btn, styles.btnSecondary]} onPress={() => router.navigate("/(tabs-user)/wallet/transactions")}>
        <Text style={[styles.btnText, { color: "black" }]}>View Transactions</Text>
      </TouchableOpacity>

      {/* <TouchableOpacity style={styles.btn} onPress={() => router.navigate("/(tabs-user)/wallet/payment-method")}
      >
        <Text style={styles.btnText}>Select Payment method</Text>
      </TouchableOpacity> */}
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center", padding: 20 },
  title: { fontSize: 28, fontWeight: "bold", marginBottom: 10 },
  balance: { fontSize: 20, marginBottom: 30 },
  btn: { backgroundColor: "black", padding: 12, borderRadius: 10, width: "70%", alignItems: "center", marginVertical: 8 },
  btnSecondary: { backgroundColor: "white", borderWidth: 1, borderColor: "#ccc" },
  btnText: { color: "white", fontWeight: "bold" },
});
</file>

<file path="app/(tabs-user)/wallet/payment-method.tsx">
import React, { useState } from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import Ionicons from "@expo/vector-icons/Ionicons";
import { router } from "expo-router";

export default function PaymentMethod() {
    const [selected, setSelected] = useState<string | null>(null);

    const methods = [
        { id: "upi", name: "UPI", icon: "logo-google" },
        { id: "card", name: "Debit/Credit Card", icon: "card-outline" },
        { id: "wallet", name: "ChargeLink Wallet", icon: "wallet-outline" },
    ];

    const handleContinue = () => {
        if (!selected) {
            alert("Please select a payment method!");
            return;
        }

        // üî• Separate navigation based on selected method
        if (selected === "upi") {
            router.navigate("/(tabs-user)/wallet/payment-screen/upi");
            return;
        }

        if (selected === "card") {
            router.navigate("/(tabs-user)/wallet/payment-screen/card");
            return;
        }

        if (selected === "wallet") {
            router.navigate("/(tabs-user)/wallet/payment-screen/chargelinkwallet");
            return;
        }
    };

    return (
        <View style={styles.container}>
            <Text style={styles.title}>Select payment method</Text>

            {methods.map((m) => (
                <TouchableOpacity
                    key={m.id}
                    style={[styles.card, selected === m.id && styles.selected]}
                    onPress={() => setSelected(m.id)}
                >
                    <Ionicons name={m.icon} size={26} color="black" />
                    <Text style={styles.cardText}>{m.name}</Text>

                    {selected === m.id && (
                        <Ionicons name="checkmark-circle" size={24} color="green" />
                    )}
                </TouchableOpacity>
            ))}

            <TouchableOpacity style={styles.btn} onPress={handleContinue}>
                <Text style={styles.btnText}>Continue</Text>
            </TouchableOpacity>

            <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/wallet")}>
                <Text style={styles.back}>‚Üê Back</Text>
            </TouchableOpacity>
        </View>
    );
}

const styles = StyleSheet.create({
    container: { flex: 1, padding: 20, paddingTop: 60 },
    title: { fontSize: 26, fontWeight: "bold", marginBottom: 25 },

    card: {
        flexDirection: "row",
        alignItems: "center",
        backgroundColor: "white",
        padding: 15,
        borderRadius: 12,
        marginBottom: 12,
        elevation: 2,
        justifyContent: "space-between",
    },

    selected: {
        borderColor: "green",
        borderWidth: 2,
    },

    cardText: { fontSize: 16, fontWeight: "600", marginLeft: 10, flex: 1 },

    btn: {
        backgroundColor: "black",
        padding: 15,
        borderRadius: 10,
        marginTop: 30,
        alignItems: "center",
    },

    btnText: { color: "white", fontSize: 18, fontWeight: "bold" },
    back: { marginTop: 15, color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/wallet/payment-screen/card.tsx">
import React, { useState } from "react";
import { View, Text, TextInput, StyleSheet, TouchableOpacity } from "react-native";
import { router } from "expo-router";

export default function CardPayment() {
  const [card, setCard] = useState("");
  const [expiry, setExpiry] = useState("");
  const [cvv, setCvv] = useState("");

  const payNow = () => {
    if (!card || !expiry || !cvv) return alert("Fill all fields");
    alert("Payment Successful (Card)");
    router.back();
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Card Payment üí≥</Text>

      <TextInput
        style={styles.input}
        placeholder="Card Number"
        keyboardType="numeric"
        value={card}
        onChangeText={setCard}
      />

      <TextInput
        style={styles.input}
        placeholder="Expiry (MM/YY)"
        value={expiry}
        onChangeText={setExpiry}
      />

      <TextInput
        style={styles.input}
        placeholder="CVV"
        keyboardType="numeric"
        secureTextEntry
        value={cvv}
        onChangeText={setCvv}
      />

      <TouchableOpacity style={styles.btn} onPress={payNow}>
        <Text style={styles.btnText}>Pay Now</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/wallet/payment-method")}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, paddingTop: 60 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20 },
  input: {
    borderWidth: 1, borderColor: "#ccc", borderRadius: 10,
    padding: 12, marginBottom: 12
  },
  btn: {
    backgroundColor: "black",
    padding: 14,
    borderRadius: 10,
    marginTop: 10
  },
  btnText: { color: "white", textAlign: "center", fontSize: 16, fontWeight: "bold" },
  back: { marginTop: 15, color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/wallet/payment-screen/chargelinkwallet.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import { router } from "expo-router";

export default function ChargeLinkWallet() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>ChargeLink Wallet üíº</Text>

      <Text style={styles.balance}>Available Balance: ‚Çπ0</Text>

      <TouchableOpacity
        style={styles.btn}
        onPress={() => alert("Wallet used (dummy)")}>
        <Text style={styles.btnText}>Use Wallet</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/wallet/payment-method")}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, paddingTop: 60 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 15 },
  balance: { fontSize: 18, marginBottom: 30, color: "#555" },
  btn: {
    backgroundColor: "black",
    padding: 14,
    borderRadius: 10,
  },
  btnText: {
    color: "white",
    textAlign: "center",
    fontWeight: "bold",
    fontSize: 16,
  },
  back: { marginTop: 20, color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/wallet/payment-screen/upi.tsx">
import React, { useState } from "react";
import { View, Text, StyleSheet, TouchableOpacity, TextInput } from "react-native";
import { router } from "expo-router";

export default function UPIScreen() {
  const [upiId, setUpiId] = useState("");

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Pay via UPI üè¶</Text>

      <TextInput
        style={styles.input}
        placeholder="Enter UPI ID (e.g., username@upi)"
        placeholderTextColor="#888"
        value={upiId}
        onChangeText={setUpiId}
      />

      <TouchableOpacity
        style={styles.btn}
        onPress={() => {
          if (!upiId) return alert("Please enter UPI ID");
          alert("UPI Request Sent");
          router.back();
        }}
      >
        <Text style={styles.btnText}>Pay</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => router.navigate("/(tabs-user)/wallet/payment-method")}>
        <Text style={styles.back}>‚Üê Back</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, paddingTop: 60 },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 20 },
  input: {
    borderWidth: 1,
    borderColor: "#ccc",
    borderRadius: 10,
    padding: 12,
    marginBottom: 20,
  },
  btn: { backgroundColor: "black", padding: 14, borderRadius: 10 },
  btnText: { color: "white", textAlign: "center", fontWeight: "bold", fontSize: 16 },
  back: { marginTop: 15, color: "blue", fontSize: 16 },
});
</file>

<file path="app/(tabs-user)/wallet/transactions.tsx">
import { View, Text, FlatList, StyleSheet, TouchableOpacity } from "react-native";
import { router, useRoute } from "expo-router";
export default function TransactionsScreen() {
  // Dummy data ‚Äì backend se connect karenge later
  const transactions = [
    { id: "1", title: "Added Money", amount: "+ ‚Çπ500", date: "23 Nov 2025" },
    { id: "2", title: "Charging Payment", amount: "- ‚Çπ120", date: "22 Nov 2025" },
    { id: "3", title: "Refund", amount: "+ ‚Çπ120", date: "21 Nov 2025" },
  ];

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Transactions üìú</Text>

      <FlatList
        data={transactions}
        renderItem={({ item }) => (
          <View style={styles.card}>
            <Text style={styles.cardTitle}>{item.title}</Text>
            <Text>{item.amount}</Text>
            <Text style={styles.date}>{item.date}</Text>
          </View>
        )}
        keyExtractor={(item) => item.id}
      />
      <TouchableOpacity onPress={()=> router.push("/(tabs-user)/home")}>
        <Text style={{ fontSize: 18}}>Go to home</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 15, backgroundColor: "#f5f5f5" },
  title: { fontSize: 26, fontWeight: "bold", marginBottom: 15 },
  card: { backgroundColor: "white", padding: 15, borderRadius: 10, marginVertical: 8, elevation: 2 },
  cardTitle: { fontSize: 16, fontWeight: "bold" },
  date: { color: "#555", marginTop: 5 },
});
</file>

<file path="app/modal.tsx">
import { Link } from 'expo-router';
import { StyleSheet } from 'react-native';

import { ThemedText } from '@/components/themed-text';
import { ThemedView } from '@/components/themed-view';

export default function ModalScreen() {
  return (
    <ThemedView style={styles.container}>
      <ThemedText type="title">This is a modal</ThemedText>
      <Link href="/" dismissTo style={styles.link}>
        <ThemedText type="link">Go to home screen</ThemedText>
      </Link>
    </ThemedView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    padding: 20,
  },
  link: {
    marginTop: 15,
    paddingVertical: 15,
  },
});
</file>

<file path="app/test-role.tsx">
import React from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { useRouter } from "expo-router";

export default function TestRole() {
  const router = useRouter();

  const setRole = async (role: "driver" | "host") => {
    await AsyncStorage.setItem("role", role);
    if (role==="driver"){
      router.replace("/(tabs-user)/home");
    }
    else if(role==="host"){
      router.replace("/(tabs-host)/home-login");
    }
    else{
      alert("Invalid role!");
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Select Role for Testing üöÄ</Text>

      <TouchableOpacity onPress={() => setRole("driver")} style={styles.btn}>
        <Text style={styles.btnText}>Set ROLE = DRIVER</Text>
      </TouchableOpacity>

      <TouchableOpacity onPress={() => setRole("host")} style={styles.btn}>
        <Text style={styles.btnText}>Set ROLE = HOST</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center", backgroundColor: "white" },
  title: { fontSize: 22, fontWeight: "bold", marginBottom: 30 },
  btn: {
    backgroundColor: "black",
    padding: 15,
    borderRadius: 10,
    marginBottom: 15,
  },
  btnText: { color: "white", fontSize: 16, fontWeight: "bold" },
});
</file>

<file path="components/external-link.tsx">
import { Href, Link } from 'expo-router';
import { openBrowserAsync, WebBrowserPresentationStyle } from 'expo-web-browser';
import { type ComponentProps } from 'react';

type Props = Omit<ComponentProps<typeof Link>, 'href'> & { href: Href & string };

export function ExternalLink({ href, ...rest }: Props) {
  return (
    <Link
      target="_blank"
      {...rest}
      href={href}
      onPress={async (event) => {
        if (process.env.EXPO_OS !== 'web') {
          // Prevent the default behavior of linking to the default browser on native.
          event.preventDefault();
          // Open the link in an in-app browser.
          await openBrowserAsync(href, {
            presentationStyle: WebBrowserPresentationStyle.AUTOMATIC,
          });
        }
      }}
    />
  );
}
</file>

<file path="components/haptic-tab.tsx">
import { BottomTabBarButtonProps } from '@react-navigation/bottom-tabs';
import { PlatformPressable } from '@react-navigation/elements';
import * as Haptics from 'expo-haptics';

export function HapticTab(props: BottomTabBarButtonProps) {
  return (
    <PlatformPressable
      {...props}
      onPressIn={(ev) => {
        if (process.env.EXPO_OS === 'ios') {
          // Add a soft haptic feedback when pressing down on the tabs.
          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);
        }
        props.onPressIn?.(ev);
      }}
    />
  );
}
</file>

<file path="components/hello-wave.tsx">
import Animated from 'react-native-reanimated';

export function HelloWave() {
  return (
    <Animated.Text
      style={{
        fontSize: 28,
        lineHeight: 32,
        marginTop: -6,
        animationName: {
          '50%': { transform: [{ rotate: '25deg' }] },
        },
        animationIterationCount: 4,
        animationDuration: '300ms',
      }}>
      üëã
    </Animated.Text>
  );
}
</file>

<file path="components/MapFallback.tsx">
import { View, Text, StyleSheet } from "react-native";

export default function MapFallback() {
  return (
    <View style={styles.center}>
      <Text>Map works only on mobile device</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  center: { flex: 1, justifyContent: "center", alignItems: "center" },
});
</file>

<file path="components/MapFallback.web.tsx">
import { View, Text, StyleSheet } from "react-native";

export default function MapFallback() {
  return (
    <View style={styles.center}>
      <Text style={styles.text}>üåê Map not supported on Web</Text>
      <Text style={styles.text}>üì± Use Expo Go on mobile</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  center: { flex: 1, justifyContent: "center", alignItems: "center" },
  text: {color:'white'},
});
</file>

<file path="components/parallax-scroll-view.tsx">
import type { PropsWithChildren, ReactElement } from 'react';
import { StyleSheet } from 'react-native';
import Animated, {
  interpolate,
  useAnimatedRef,
  useAnimatedStyle,
  useScrollOffset,
} from 'react-native-reanimated';

import { ThemedView } from '@/components/themed-view';
import { useColorScheme } from '@/hooks/use-color-scheme';
import { useThemeColor } from '@/hooks/use-theme-color';

const HEADER_HEIGHT = 250;

type Props = PropsWithChildren<{
  headerImage: ReactElement;
  headerBackgroundColor: { dark: string; light: string };
}>;

export default function ParallaxScrollView({
  children,
  headerImage,
  headerBackgroundColor,
}: Props) {
  const backgroundColor = useThemeColor({}, 'background');
  const colorScheme = useColorScheme() ?? 'light';
  const scrollRef = useAnimatedRef<Animated.ScrollView>();
  const scrollOffset = useScrollOffset(scrollRef);
  const headerAnimatedStyle = useAnimatedStyle(() => {
    return {
      transform: [
        {
          translateY: interpolate(
            scrollOffset.value,
            [-HEADER_HEIGHT, 0, HEADER_HEIGHT],
            [-HEADER_HEIGHT / 2, 0, HEADER_HEIGHT * 0.75]
          ),
        },
        {
          scale: interpolate(scrollOffset.value, [-HEADER_HEIGHT, 0, HEADER_HEIGHT], [2, 1, 1]),
        },
      ],
    };
  });

  return (
    <Animated.ScrollView
      ref={scrollRef}
      style={{ backgroundColor, flex: 1 }}
      scrollEventThrottle={16}>
      <Animated.View
        style={[
          styles.header,
          { backgroundColor: headerBackgroundColor[colorScheme] },
          headerAnimatedStyle,
        ]}>
        {headerImage}
      </Animated.View>
      <ThemedView style={styles.content}>{children}</ThemedView>
    </Animated.ScrollView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  header: {
    height: HEADER_HEIGHT,
    overflow: 'hidden',
  },
  content: {
    flex: 1,
    padding: 32,
    gap: 16,
    overflow: 'hidden',
  },
});
</file>

<file path="components/themed-text.tsx">
import { StyleSheet, Text, type TextProps } from 'react-native';

import { useThemeColor } from '@/hooks/use-theme-color';

export type ThemedTextProps = TextProps & {
  lightColor?: string;
  darkColor?: string;
  type?: 'default' | 'title' | 'defaultSemiBold' | 'subtitle' | 'link';
};

export function ThemedText({
  style,
  lightColor,
  darkColor,
  type = 'default',
  ...rest
}: ThemedTextProps) {
  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');

  return (
    <Text
      style={[
        { color },
        type === 'default' ? styles.default : undefined,
        type === 'title' ? styles.title : undefined,
        type === 'defaultSemiBold' ? styles.defaultSemiBold : undefined,
        type === 'subtitle' ? styles.subtitle : undefined,
        type === 'link' ? styles.link : undefined,
        style,
      ]}
      {...rest}
    />
  );
}

const styles = StyleSheet.create({
  default: {
    fontSize: 16,
    lineHeight: 24,
  },
  defaultSemiBold: {
    fontSize: 16,
    lineHeight: 24,
    fontWeight: '600',
  },
  title: {
    fontSize: 32,
    fontWeight: 'bold',
    lineHeight: 32,
  },
  subtitle: {
    fontSize: 20,
    fontWeight: 'bold',
  },
  link: {
    lineHeight: 30,
    fontSize: 16,
    color: '#0a7ea4',
  },
});
</file>

<file path="components/themed-view.tsx">
import { View, type ViewProps } from 'react-native';

import { useThemeColor } from '@/hooks/use-theme-color';

export type ThemedViewProps = ViewProps & {
  lightColor?: string;
  darkColor?: string;
};

export function ThemedView({ style, lightColor, darkColor, ...otherProps }: ThemedViewProps) {
  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');

  return <View style={[{ backgroundColor }, style]} {...otherProps} />;
}
</file>

<file path="components/ui/collapsible.tsx">
import { PropsWithChildren, useState } from 'react';
import { StyleSheet, TouchableOpacity } from 'react-native';

import { ThemedText } from '@/components/themed-text';
import { ThemedView } from '@/components/themed-view';
import { IconSymbol } from '@/components/ui/icon-symbol';
import { Colors } from '@/constants/theme';
import { useColorScheme } from '@/hooks/use-color-scheme';

export function Collapsible({ children, title }: PropsWithChildren & { title: string }) {
  const [isOpen, setIsOpen] = useState(false);
  const theme = useColorScheme() ?? 'light';

  return (
    <ThemedView>
      <TouchableOpacity
        style={styles.heading}
        onPress={() => setIsOpen((value) => !value)}
        activeOpacity={0.8}>
        <IconSymbol
          name="chevron.right"
          size={18}
          weight="medium"
          color={theme === 'light' ? Colors.light.icon : Colors.dark.icon}
          style={{ transform: [{ rotate: isOpen ? '90deg' : '0deg' }] }}
        />

        <ThemedText type="defaultSemiBold">{title}</ThemedText>
      </TouchableOpacity>
      {isOpen && <ThemedView style={styles.content}>{children}</ThemedView>}
    </ThemedView>
  );
}

const styles = StyleSheet.create({
  heading: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
  },
  content: {
    marginTop: 6,
    marginLeft: 24,
  },
});
</file>

<file path="components/ui/icon-symbol.ios.tsx">
import { SymbolView, SymbolViewProps, SymbolWeight } from 'expo-symbols';
import { StyleProp, ViewStyle } from 'react-native';

export function IconSymbol({
  name,
  size = 24,
  color,
  style,
  weight = 'regular',
}: {
  name: SymbolViewProps['name'];
  size?: number;
  color: string;
  style?: StyleProp<ViewStyle>;
  weight?: SymbolWeight;
}) {
  return (
    <SymbolView
      weight={weight}
      tintColor={color}
      resizeMode="scaleAspectFit"
      name={name}
      style={[
        {
          width: size,
          height: size,
        },
        style,
      ]}
    />
  );
}
</file>

<file path="components/ui/icon-symbol.tsx">
// Fallback for using MaterialIcons on Android and web.

import MaterialIcons from '@expo/vector-icons/MaterialIcons';
import { SymbolWeight, SymbolViewProps } from 'expo-symbols';
import { ComponentProps } from 'react';
import { OpaqueColorValue, type StyleProp, type TextStyle } from 'react-native';

type IconMapping = Record<SymbolViewProps['name'], ComponentProps<typeof MaterialIcons>['name']>;
type IconSymbolName = keyof typeof MAPPING;

/**
 * Add your SF Symbols to Material Icons mappings here.
 * - see Material Icons in the [Icons Directory](https://icons.expo.fyi).
 * - see SF Symbols in the [SF Symbols](https://developer.apple.com/sf-symbols/) app.
 */
const MAPPING = {
  'house.fill': 'home',
  'paperplane.fill': 'send',
  'location-on': 'location-on',
  'chevron.left.forwardslash.chevron.right': 'code',
  'chevron.right': 'chevron-right',
} as IconMapping;

/**
 * An icon component that uses native SF Symbols on iOS, and Material Icons on Android and web.
 * This ensures a consistent look across platforms, and optimal resource usage.
 * Icon `name`s are based on SF Symbols and require manual mapping to Material Icons.
 */
export function IconSymbol({
  name,
  size = 24,
  color,
  style,
}: {
  name: IconSymbolName;
  size?: number;
  color: string | OpaqueColorValue;
  style?: StyleProp<TextStyle>;
  weight?: SymbolWeight;
}) {
  return <MaterialIcons color={color} size={size} name={MAPPING[name]} style={style} />;
}
</file>

<file path="constants/theme.ts">
/**
 * Below are the colors that are used in the app. The colors are defined in the light and dark mode.
 * There are many other ways to style your app. For example, [Nativewind](https://www.nativewind.dev/), [Tamagui](https://tamagui.dev/), [unistyles](https://reactnativeunistyles.vercel.app), etc.
 */

import { Platform } from 'react-native';

const tintColorLight = '#0a7ea4';
const tintColorDark = '#fff';

export const Colors = {
  light: {
    text: '#11181C',
    background: '#fff',
    tint: tintColorLight,
    icon: '#687076',
    tabIconDefault: '#687076',
    tabIconSelected: tintColorLight,
  },
  dark: {
    text: '#ECEDEE',
    background: '#151718',
    tint: tintColorDark,
    icon: '#9BA1A6',
    tabIconDefault: '#9BA1A6',
    tabIconSelected: tintColorDark,
  },
};

export const Fonts = Platform.select({
  ios: {
    /** iOS `UIFontDescriptorSystemDesignDefault` */
    sans: 'system-ui',
    /** iOS `UIFontDescriptorSystemDesignSerif` */
    serif: 'ui-serif',
    /** iOS `UIFontDescriptorSystemDesignRounded` */
    rounded: 'ui-rounded',
    /** iOS `UIFontDescriptorSystemDesignMonospaced` */
    mono: 'ui-monospace',
  },
  default: {
    sans: 'normal',
    serif: 'serif',
    rounded: 'normal',
    mono: 'monospace',
  },
  web: {
    sans: "system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",
    serif: "Georgia, 'Times New Roman', serif",
    rounded: "'SF Pro Rounded', 'Hiragino Maru Gothic ProN', Meiryo, 'MS PGothic', sans-serif",
    mono: "SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace",
  },
});
</file>

<file path="eslint.config.js">
// https://docs.expo.dev/guides/using-eslint/
const { defineConfig } = require('eslint/config');
const expoConfig = require('eslint-config-expo/flat');

module.exports = defineConfig([
  expoConfig,
  {
    ignores: ['dist/*'],
  },
]);
</file>

<file path="hooks/use-color-scheme.ts">
export { useColorScheme } from 'react-native';
</file>

<file path="hooks/use-color-scheme.web.ts">
import { useEffect, useState } from 'react';
import { useColorScheme as useRNColorScheme } from 'react-native';

/**
 * To support static rendering, this value needs to be re-calculated on the client side for web
 */
export function useColorScheme() {
  const [hasHydrated, setHasHydrated] = useState(false);

  useEffect(() => {
    setHasHydrated(true);
  }, []);

  const colorScheme = useRNColorScheme();

  if (hasHydrated) {
    return colorScheme;
  }

  return 'light';
}
</file>

<file path="hooks/use-theme-color.ts">
/**
 * Learn more about light and dark modes:
 * https://docs.expo.dev/guides/color-schemes/
 */

import { Colors } from '@/constants/theme';
import { useColorScheme } from '@/hooks/use-color-scheme';

export function useThemeColor(
  props: { light?: string; dark?: string },
  colorName: keyof typeof Colors.light & keyof typeof Colors.dark
) {
  const theme = useColorScheme() ?? 'light';
  const colorFromProps = props[theme];

  if (colorFromProps) {
    return colorFromProps;
  } else {
    return Colors[theme][colorName];
  }
}
</file>

<file path="native/MapComponent.tsx">
import { useEffect, useState } from "react";
import { View, Text, StyleSheet } from "react-native";
import * as Location from "expo-location";

// üëá This import is OK now ‚Äî app/ folder ke bahar hai!  
const MapView = require("react-native-maps").default;
const { Marker } = require("react-native-maps");

export default function MapComponent() {
  const [location, setLocation] = useState<any>(null);

  useEffect(() => {
    (async () => {
      const { status } = await Location.requestForegroundPermissionsAsync();
      if (status !== "granted") return;
      const loc = await Location.getCurrentPositionAsync({});
      setLocation(loc.coords);
    })();
  }, []);

  if (!location) return (
    <View style={styles.center}><Text>Loading...</Text></View>
  );

  return (
    <MapView
      style={styles.map}
      initialRegion={{
        latitude: location.latitude,
        longitude: location.longitude,
        latitudeDelta: 0.01,
        longitudeDelta: 0.01,
      }}>
      <Marker coordinate={location} title="You are here" />
    </MapView>
  );
}

const styles = StyleSheet.create({
  map: { flex: 1 },
  center: { flex: 1, justifyContent: "center", alignItems: "center" },
});
</file>

<file path="native/MapComponent.web.tsx">
export default function MapComponent() {
    return null;  // Web build me kuch load nahi hoga üî•
  }
</file>

<file path="package.json">
{
  "name": "app",
  "main": "expo-router/entry",
  "version": "1.0.0",
  "scripts": {
    "start": "expo start",
    "reset-project": "node ./scripts/reset-project.js",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web",
    "lint": "expo lint"
  },
  "dependencies": {
    "@expo/vector-icons": "^15.0.3",
    "@react-native-async-storage/async-storage": "2.2.0",
    "@react-native-picker/picker": "^2.11.1",
    "@react-navigation/bottom-tabs": "^7.4.0",
    "@react-navigation/elements": "^2.6.3",
    "@react-navigation/native": "7.1.8",
    "@react-navigation/stack": "^7.6.4",
    "@reduxjs/toolkit": "^2.10.1",
    "axios": "^1.13.2",
    "expo": "~54.0.25",
    "expo-clipboard": "~8.0.7",
    "expo-constants": "~18.0.10",
    "expo-font": "~14.0.9",
    "expo-haptics": "~15.0.7",
    "expo-image": "~3.0.10",
    "expo-image-picker": "~17.0.8",
    "expo-linking": "~8.0.9",
    "expo-location": "~19.0.7",
    "expo-router": "~6.0.15",
    "expo-splash-screen": "~31.0.11",
    "expo-status-bar": "~3.0.8",
    "expo-symbols": "~1.0.7",
    "expo-system-ui": "~6.0.8",
    "expo-web-browser": "~15.0.9",
    "framer-motion": "^12.23.24",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-native": "0.81.5",
    "react-native-chart-kit": "^6.12.0",
    "react-native-gesture-handler": "~2.28.0",
    "react-native-maps": "^1.20.1",
    "react-native-paper": "^5.14.5",
    "react-native-reanimated": "~4.1.1",
    "react-native-safe-area-context": "~5.6.0",
    "react-native-screens": "~4.16.0",
    "react-native-svg": "^15.12.1",
    "react-native-web": "~0.21.0",
    "react-native-worklets": "0.5.1",
    "react-redux": "^9.2.0"
  },
  "devDependencies": {
    "@types/react": "~19.1.0",
    "eslint": "^9.25.0",
    "eslint-config-expo": "~10.0.0",
    "typescript": "~5.9.2"
  },
  "private": true
}
</file>

<file path="README.md">
# Welcome to your Expo app üëã

This is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).

## Get started

1. Install dependencies

   ```bash
   npm install
   ```

2. Start the app

   ```bash
   npx expo start
   ```

In the output, you'll find options to open the app in a

- [development build](https://docs.expo.dev/develop/development-builds/introduction/)
- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)
- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)
- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo

You can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).

## Get a fresh project

When you're ready, run:

```bash
npm run reset-project
```

This command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.

## Learn more

To learn more about developing your project with Expo, look at the following resources:

- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).
- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.

## Join the community

Join our community of developers creating universal apps.

- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.
- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.
</file>

<file path="scripts/reset-project.js">
#!/usr/bin/env node

/**
 * This script is used to reset the project to a blank state.
 * It deletes or moves the /app, /components, /hooks, /scripts, and /constants directories to /app-example based on user input and creates a new /app directory with an index.tsx and _layout.tsx file.
 * You can remove the `reset-project` script from package.json and safely delete this file after running it.
 */

const fs = require("fs");
const path = require("path");
const readline = require("readline");

const root = process.cwd();
const oldDirs = ["app", "components", "hooks", "constants", "scripts"];
const exampleDir = "app-example";
const newAppDir = "app";
const exampleDirPath = path.join(root, exampleDir);

const indexContent = `import { Text, View } from "react-native";

export default function Index() {
  return (
    <View
      style={{
        flex: 1,
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <Text>Edit app/index.tsx to edit this screen.</Text>
    </View>
  );
}
`;

const layoutContent = `import { Stack } from "expo-router";

export default function RootLayout() {
  return <Stack />;
}
`;

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

const moveDirectories = async (userInput) => {
  try {
    if (userInput === "y") {
      // Create the app-example directory
      await fs.promises.mkdir(exampleDirPath, { recursive: true });
      console.log(`üìÅ /${exampleDir} directory created.`);
    }

    // Move old directories to new app-example directory or delete them
    for (const dir of oldDirs) {
      const oldDirPath = path.join(root, dir);
      if (fs.existsSync(oldDirPath)) {
        if (userInput === "y") {
          const newDirPath = path.join(root, exampleDir, dir);
          await fs.promises.rename(oldDirPath, newDirPath);
          console.log(`‚û°Ô∏è /${dir} moved to /${exampleDir}/${dir}.`);
        } else {
          await fs.promises.rm(oldDirPath, { recursive: true, force: true });
          console.log(`‚ùå /${dir} deleted.`);
        }
      } else {
        console.log(`‚û°Ô∏è /${dir} does not exist, skipping.`);
      }
    }

    // Create new /app directory
    const newAppDirPath = path.join(root, newAppDir);
    await fs.promises.mkdir(newAppDirPath, { recursive: true });
    console.log("\nüìÅ New /app directory created.");

    // Create index.tsx
    const indexPath = path.join(newAppDirPath, "index.tsx");
    await fs.promises.writeFile(indexPath, indexContent);
    console.log("üìÑ app/index.tsx created.");

    // Create _layout.tsx
    const layoutPath = path.join(newAppDirPath, "_layout.tsx");
    await fs.promises.writeFile(layoutPath, layoutContent);
    console.log("üìÑ app/_layout.tsx created.");

    console.log("\n‚úÖ Project reset complete. Next steps:");
    console.log(
      `1. Run \`npx expo start\` to start a development server.\n2. Edit app/index.tsx to edit the main screen.${
        userInput === "y"
          ? `\n3. Delete the /${exampleDir} directory when you're done referencing it.`
          : ""
      }`
    );
  } catch (error) {
    console.error(`‚ùå Error during script execution: ${error.message}`);
  }
};

rl.question(
  "Do you want to move existing files to /app-example instead of deleting them? (Y/n): ",
  (answer) => {
    const userInput = answer.trim().toLowerCase() || "y";
    if (userInput === "y" || userInput === "n") {
      moveDirectories(userInput).finally(() => rl.close());
    } else {
      console.log("‚ùå Invalid input. Please enter 'Y' or 'N'.");
      rl.close();
    }
  }
);
</file>

<file path="tsconfig.json">
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true,
    "allowJs": true,
    "resolveJsonModule": true,
    "moduleResolution": "node",
    "jsx": "react-jsx",
    "paths": {
      "@/*": ["./*"]
    },
    "types": [
      "react",
      "react-native",
      "react-native-web",
      "node"
    ]
  },
  "include": [
    "**/*.ts",
    "**/*.tsx",
    ".expo/types/**/*.ts",
    "expo-env.d.ts"
  ]
}
</file>

<file path="utils/auth-check.ts">
// utils/auth-check.ts

import { getItem } from "./storage";

export async function isAuthenticated(): Promise<boolean> {
  const token = await getItem("auth_token");
  return !!token; // true if token exists
}

export async function logoutUser(): Promise<void> {
  await Promise.all([
    removeItem("auth_token"),
    removeItem("user_details"),
  ]);
}
</file>

<file path="utils/constants.ts">
// utils/constants.ts

export const API_BASE_URL = "https://dummy-backend-url.com"; // Future: change only ONE line

export const COLORS = {
  primary: "black",
  secondary: "#f4f4f4",
  error: "red",
  textDark: "#222",
  textLight: "#777",
};

export const ROLES = {
  USER: "user",
  HOST: "host",
};

export const STORAGE_KEYS = {
  TOKEN: "auth_token",
  USER: "user_details",
};
</file>

<file path="utils/storage.ts">
// utils/storage.ts
import AsyncStorage from "@react-native-async-storage/async-storage";

// Save data
export async function setItem(key: string, value: any) {
  try {
    await AsyncStorage.setItem(key, JSON.stringify(value));
  } catch (error) {
    console.log("Error storing data:", error);
  }
}

// Get data
export async function getItem(key: string) {
  try {
    const data = await AsyncStorage.getItem(key);
    return data ? JSON.parse(data) : null;
  } catch (error) {
    console.log("Error fetching data:", error);
    return null;
  }
}

// Remove data
export async function removeItem(key: string) {
  try {
    await AsyncStorage.removeItem(key);
  } catch (error) {
    console.log("Error removing data:", error);
  }
}
</file>

</files>
